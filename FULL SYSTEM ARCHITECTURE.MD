# TalyerStudio - System Architecture & Roadmap
## Auto/Moto Shop Management SaaS Platform

---

## 1. SYSTEM OVERVIEW

### 1.1 Platform Components
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TalyerStudio Ecosystem                   â”‚
â”‚            ğŸš— Auto Shops + ğŸï¸ Motorcycle Shops              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  Landing Page    â”‚  â”‚   Dashboard      â”‚                â”‚
â”‚  â”‚  talyerstudio    â”‚  â”‚   dashboard.     â”‚                â”‚
â”‚  â”‚     .com         â”‚  â”‚  talyerstudio    â”‚                â”‚
â”‚  â”‚  (HTML/CSS/JS)   â”‚  â”‚     .com         â”‚                â”‚
â”‚  â”‚                  â”‚  â”‚   (React)        â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚           â”‚                     â”‚                            â”‚
â”‚           â”‚                     â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                      â”‚                                       â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚              â”‚   API Gateway  â”‚                             â”‚
â”‚              â”‚ api.talyerstudioâ”‚                            â”‚
â”‚              â”‚     .com       â”‚                             â”‚
â”‚              â”‚  (.NET 8 C#)   â”‚                             â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                      â”‚                                       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚         â”‚            â”‚            â”‚                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”                    â”‚
â”‚    â”‚ OPTION â”‚   â”‚OPTION â”‚   â”‚ OPTION â”‚                    â”‚
â”‚    â”‚   A:   â”‚   â”‚  B:   â”‚   â”‚   C:   â”‚                    â”‚
â”‚    â”‚Monolithâ”‚   â”‚Modularâ”‚   â”‚ Micro- â”‚                    â”‚
â”‚    â”‚        â”‚   â”‚Monolithâ”‚   â”‚servicesâ”‚                    â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â”‚
â”‚         â”‚           â”‚           â”‚                           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                     â”‚                                       â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚              â”‚  PostgreSQL  â”‚                              â”‚
â”‚              â”‚   Database   â”‚                              â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                               â”‚
â”‚  FUTURE:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Mechanic Mobile  â”‚  â”‚ Customer Mobile  â”‚                â”‚
â”‚  â”‚   App (iOS/      â”‚  â”‚  (White-label)   â”‚                â”‚
â”‚  â”‚   Android)       â”‚  â”‚                  â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Technology Stack

**Frontend:**
- Landing: HTML5, CSS3, Vanilla JavaScript (SEO optimized)
- Dashboard: React 18+, TypeScript, TailwindCSS, React Query, Zustand
- Future Mobile: React Native or Flutter

**Backend:**
- API: .NET 8 (C#), ASP.NET Core Web API
- Authentication: JWT + Refresh Tokens
- Real-time: SignalR for live updates
- Background Jobs: Hangfire

**Database:**
- Primary: PostgreSQL 15+
- Caching: Redis
- File Storage: AWS S3 or Azure Blob Storage

**Infrastructure:**
- Hosting: AWS/Azure/DigitalOcean
- CDN: CloudFlare
- Email: SendGrid/AWS SES
- SMS: Semaphore/Twilio (PH support)
- Payment: PayMongo, GCash, Maya (Philippine payment gateways)

---

## 2. CORE MODULES & FEATURES

### 2.1 Multi-Tenancy Architecture
```
Shop (Tenant) â†’ Branches â†’ Users â†’ Roles & Permissions
```

**Features:**
- Multi-shop support (single subscription, multiple locations)
- Branch-level inventory and staff management
- Centralized reporting across branches
- Custom branding per shop (logo, colors, domain)

### 2.2 Customer Management (CRM)

**Core Features:**
- Customer profiles (contact, address, birthday)
- Customer vehicle registry (multiple vehicles per customer)
- Service history and preferences
- Customer notes and tags
- Loyalty points system
- SMS/Email notifications
- Customer groups (VIP, Regular, Corporate)

**Philippine-Specific:**
- Support for Philippine mobile numbers (+63)
- Barangay/Municipality/Province address fields
- Birthday reminders (Filipino culture-focused)

### 2.3 Vehicle Management

**Vehicle Registry (Auto & Motorcycle):**
- Make, Model, Year, Color
- Plate Number, Engine Number, Chassis Number
- Odometer/Mileage tracking
- Vehicle type: 
  - **Auto**: Car, SUV, Truck, Van, Pickup
  - **Motorcycle**: Underbone, Sport, Scooter, Scrambler, Big Bike
- Displacement tracking (for motorcycles: 110cc, 125cc, 150cc, 400cc, 1000cc+)
- Vehicle images
- Service intervals (oil change, PMS, chain cleaning, etc.)
- Vehicle QR code for quick lookup
- OR/CR expiry tracking (Philippines-specific)

**Motorcycle-Specific Fields:**
- Bike category (Commuter, Sport, Touring, Off-road)
- Modifications tracking (exhaust, handlebars, etc.)
- Chain & sprocket tracking
- Tire size (front/rear)

**Maintenance Scheduling:**
- Service reminders based on date/mileage
- Different intervals for auto vs motorcycle
- Automated SMS/Email reminders
- Service history timeline

### 2.4 Service Management

**Service Types:**

**Auto Services:**
- General Repair & Maintenance
- Car Wash (Basic, Premium, Full Detailing)
- Detailing (Interior, Exterior, Full)
- Oil Change & Fluid Services
- Tire Services (rotation, alignment, balancing)
- Brake Services
- Engine Diagnostics
- Transmission Services
- Paint & Body Work
- AC Services
- Battery Services
- Custom services (user-defined)

**Motorcycle Services:**
- Oil Change (engine, gear oil)
- Chain Cleaning & Lubrication
- Chain & Sprocket Replacement
- Tire Change (front/rear)
- Brake Pad Replacement
- Carburetor Cleaning/Tuning
- Fuel Injection Cleaning
- General Tune-up
- Valve Clearance Adjustment
- Motorcycle Wash & Detailing
- Customization (exhaust, bars, lights)
- Performance Upgrades
- Custom services (user-defined)

**Job Orders/Work Orders:**
- Create job orders with multiple services
- Assign mechanics/technicians
- Service checklist (before/after inspection)
- Time tracking (start/end time)
- Job status workflow: Pending â†’ In Progress â†’ Completed â†’ Invoiced
- Photo documentation (before/after)
- Customer approval system
- Labor pricing + parts pricing
- Modification/customization tracking (for motorcycles)

### 2.5 Inventory Management

**Parts & Products:**
- SKU management
- Stock levels per branch
- Low stock alerts
- Reorder points
- Supplier management
- Purchase orders
- Stock transfers between branches
- Barcode/QR scanning

**Auto Parts Categories:**
- Engine oils (5W-30, 10W-40, etc.)
- Oil filters, Air filters, Fuel filters
- Brake pads, Brake fluid
- Tires (by size)
- Batteries
- Spark plugs
- Belts & hoses
- Transmission fluid
- Coolant
- Wiper blades
- Light bulbs
- Body parts & accessories

**Motorcycle Parts Categories:**
- Motorcycle oils (4T, 2T, gear oil)
- Oil filters (screw-type, cartridge)
- Air filters (paper, foam, performance)
- Chains & sprockets (various sizes)
- Brake pads (front, rear)
- Tires (front/rear by size: 70/90-17, 80/90-17, 120/70-17, etc.)
- Spark plugs
- Batteries (12V, different AH ratings)
- Clutch plates
- Cables (throttle, clutch, brake)
- Lights & electrical
- Accessories (helmets, jackets, gloves, locks)
- Aftermarket parts (exhaust, handlebars, mirrors)
- Customization parts

**Philippine Context:**
- Support for non-branded "compatible" parts
- OEM vs Aftermarket vs Compatible parts
- Markup/pricing strategies
- Multi-unit support (piece, liter, gallon, set, pair)

### 2.6 Point of Sale (POS)

**Sales Features:**
- Quick service checkout
- Multiple payment methods (Cash, GCash, Maya, Card, Bank Transfer)
- Split payments
- Discounts (percentage, fixed, voucher codes)
- Tax computation (VAT-inclusive/exclusive)
- Receipt generation (print/email/SMS)
- Daily sales reporting
- Cash drawer management

**Car Wash Integration:**
- Quick wash packages
- Membership/prepaid cards
- Queue management
- Express checkout

### 2.7 Invoicing & Payments

**Features:**
- Professional invoice generation
- Estimate/Quote creation
- Deposit/Down payment tracking
- Installment payments
- Payment history
- Overdue tracking and reminders
- Official Receipt (OR) generation
- Invoice templates (customizable)

**Philippine Requirements:**
- BIR-compliant receipts
- TIN field support
- Senior Citizen/PWD discount automation

### 2.8 Appointment & Scheduling

**Booking System:**
- Online appointment booking (embed on website)
- Calendar view (day/week/month)
- Mechanic/Bay assignment
- Service duration estimates
- Conflict prevention
- SMS/Email confirmations
- Reminder notifications (1 day before, 2 hours before)
- Walk-in vs Appointment tracking

**Queue Management:**
- Real-time queue status
- Estimated wait time
- Customer notifications

### 2.9 Staff & User Management

**User Roles:**
- Super Admin (SaaS owner)
- Shop Owner/Manager
- Branch Manager
- Cashier
- Mechanic/Technician
- Receptionist
- Inventory Manager

**Staff Features:**
- Role-based access control (RBAC)
- Activity logging
- Performance tracking (jobs completed, revenue generated)
- Commission tracking
- Attendance/Time tracking
- Payroll integration ready

### 2.10 Reporting & Analytics

**Dashboard Metrics:**
- Today's revenue
- Jobs completed
- Pending jobs
- Top services
- Top customers
- Inventory alerts
- Cash flow

**Reports:**
- Sales reports (daily, weekly, monthly, custom range)
- Service performance reports
- Mechanic performance
- Customer analytics
- Inventory reports (stock levels, turnover)
- Profit & Loss statements
- Tax reports (VAT summary)
- Receivables aging report

**Export Options:**
- PDF, Excel, CSV
- Scheduled email reports

### 2.11 Marketing & Loyalty

**Features:**
- SMS/Email campaigns
- Birthday greetings with promos
- Service reminder campaigns
- Loyalty points system
- Referral program
- Promo code management
- Customer feedback/reviews

**Philippine Context:**
- Integration with Viber Business
- Facebook Messenger notifications (future)

### 2.12 Settings & Configuration

**Shop Settings:**
- Business information
- Branch management
- Tax settings
- Service categories
- Pricing templates
- Receipt templates
- Working hours
- Holiday calendar

**Subscription & Billing:**
- Plan management (Starter, Professional, Enterprise)
- Usage tracking
- Billing history
- Payment method management

---

## 3. DATABASE SCHEMA DESIGN

### 3.1 Core Tables Structure

```sql
-- Multi-tenancy
Tenants (Shops)
â”œâ”€â”€ Branches
â”œâ”€â”€ Users
â”œâ”€â”€ Roles
â””â”€â”€ Permissions

-- CRM
Customers
â”œâ”€â”€ Vehicles
â”œâ”€â”€ CustomerNotes
â”œâ”€â”€ LoyaltyPoints
â””â”€â”€ CustomerGroups

-- Service Management
Services (Master List)
â”œâ”€â”€ JobOrders
â”‚   â”œâ”€â”€ JobOrderItems (Services)
â”‚   â”œâ”€â”€ JobOrderParts
â”‚   â”œâ”€â”€ Assignments (Mechanics)
â”‚   â””â”€â”€ StatusHistory
â”œâ”€â”€ ServiceCategories
â””â”€â”€ ServicePackages

-- Inventory
Products
â”œâ”€â”€ Suppliers
â”œâ”€â”€ PurchaseOrders
â”œâ”€â”€ StockMovements
â”œâ”€â”€ StockLevels (per branch)
â””â”€â”€ ProductCategories

-- Financial
Invoices
â”œâ”€â”€ InvoiceItems
â”œâ”€â”€ Payments
â”œâ”€â”€ PaymentMethods
â””â”€â”€ Estimates

-- Scheduling
Appointments
â”œâ”€â”€ AppointmentServices
â””â”€â”€ Calendar

-- Staff
Employees
â”œâ”€â”€ EmployeeRoles
â”œâ”€â”€ Attendance
â”œâ”€â”€ Commissions
â””â”€â”€ Performance

-- Marketing
Campaigns
â”œâ”€â”€ PromosCodes
â”œâ”€â”€ CustomerSegments
â””â”€â”€ EmailTemplates

-- System
ActivityLogs
Settings
Notifications
```

### 3.2 Key Relationships

```
Customer (1) â”€â”€â†’ (N) Vehicle
Customer (1) â”€â”€â†’ (N) JobOrder
JobOrder (1) â”€â”€â†’ (N) JobOrderItem
JobOrder (1) â”€â”€â†’ (1) Invoice
Invoice (1) â”€â”€â†’ (N) Payment
Vehicle (1) â”€â”€â†’ (N) JobOrder
Employee (N) â”€â”€â†’ (N) JobOrder (assignments)
Product (1) â”€â”€â†’ (N) StockLevel (per branch)
```

---

## 4. API ARCHITECTURE & MICROSERVICES DECISION

### 4.1 Architecture Options Analysis

**CRITICAL DECISION:** Should you start with Microservices or Monolith?

#### Option A: Monolithic Architecture (RECOMMENDED FOR MVP)
```
Single .NET 8 Application
â”œâ”€â”€ API Layer (Controllers)
â”œâ”€â”€ Application Layer (Services)
â”œâ”€â”€ Domain Layer (Models)
â””â”€â”€ Infrastructure Layer (Data Access)

Single PostgreSQL Database
```

**Pros:**
- âœ… Faster development (get to market in 3 months)
- âœ… Simpler deployment (one application)
- âœ… Easier debugging and testing
- âœ… Lower infrastructure costs
- âœ… Simpler transaction management
- âœ… Perfect for team of 1-3 developers
- âœ… Easier to refactor and change

**Cons:**
- âŒ Harder to scale individual components
- âŒ All services share same database
- âŒ Deployment of entire app for small changes
- âŒ Technology stack locked to .NET

**When to use:** MVP, 0-1,000 shops, small team

---

#### Option B: Modular Monolith (RECOMMENDED FOR SCALE)
```
Single .NET 8 Application with Clear Module Boundaries
â”œâ”€â”€ Customers Module
â”œâ”€â”€ Vehicles Module
â”œâ”€â”€ JobOrders Module
â”œâ”€â”€ Inventory Module
â”œâ”€â”€ Invoicing Module
â”œâ”€â”€ Payments Module
â””â”€â”€ Notifications Module

Single PostgreSQL Database (with schema separation)
```

**Pros:**
- âœ… Clear separation of concerns
- âœ… Easier to extract to microservices later
- âœ… Still simple deployment
- âœ… Shared infrastructure
- âœ… Easy to migrate to microservices when needed
- âœ… Team can work on different modules

**Cons:**
- âŒ Requires discipline to maintain boundaries
- âŒ Still shares same database
- âŒ All modules deployed together

**When to use:** 1,000-5,000 shops, growing team

---

#### Option C: Microservices Architecture (FUTURE)
```
API Gateway (Ocelot/YARP)
â”œâ”€â”€ Customer Service (.NET)
â”œâ”€â”€ Vehicle Service (.NET)
â”œâ”€â”€ JobOrder Service (.NET)
â”œâ”€â”€ Inventory Service (.NET)
â”œâ”€â”€ Invoice Service (.NET)
â”œâ”€â”€ Payment Service (.NET)
â”œâ”€â”€ Notification Service (Node.js/Python)
â””â”€â”€ Reporting Service (.NET)

Service Mesh (optional)
â”œâ”€â”€ Service Discovery (Consul/Eureka)
â”œâ”€â”€ Load Balancing
â””â”€â”€ Circuit Breakers

Databases
â”œâ”€â”€ Customer DB (PostgreSQL)
â”œâ”€â”€ Inventory DB (PostgreSQL)
â”œâ”€â”€ Payment DB (PostgreSQL)
â””â”€â”€ Analytics DB (ClickHouse/TimescaleDB)

Message Broker
â”œâ”€â”€ RabbitMQ or
â””â”€â”€ Apache Kafka

Caching Layer
â””â”€â”€ Redis Cluster
```

**Pros:**
- âœ… Independent scaling of services
- âœ… Technology flexibility per service
- âœ… Independent deployment
- âœ… Team autonomy
- âœ… Fault isolation
- âœ… Better for large teams

**Cons:**
- âŒ MUCH more complex
- âŒ Distributed transactions are hard
- âŒ Network latency
- âŒ More infrastructure costs
- âŒ Harder debugging
- âŒ Service discovery complexity
- âŒ Data consistency challenges
- âŒ Requires DevOps expertise
- âŒ Overkill for <10,000 users

**When to use:** 10,000+ shops, 20+ developers

---

### 4.2 RECOMMENDED APPROACH: Progressive Evolution

**Phase 1: Monolith (Months 1-12)**
```
Start with Clean Architecture Monolith
- Get to market fast
- Validate product-market fit
- Build customer base
- Keep costs low
```

**Phase 2: Modular Monolith (Year 2)**
```
Refactor to Modular Monolith
- Clear module boundaries
- Prepare for microservices
- Team can work independently
- Still simple deployment
```

**Phase 3: Hybrid (Year 3)**
```
Extract Critical Services Only
- Extract high-load services (Notifications, Payments)
- Keep core business logic in monolith
- Best of both worlds
- Gradual migration
```

**Phase 4: Full Microservices (Year 4+)**
```
If/When You Reach:
- 10,000+ shops
- 50+ developers
- Multiple teams
- Global expansion
- Need for independent scaling
```

---

### 4.3 Why NOT to Start with Microservices

**The Microservices Trap:**
Many startups fail because they:
1. Over-engineer too early
2. Spend 12 months building infrastructure
3. Never validate the business
4. Run out of money before launch
5. Have 10 services with 0 users

**Famous Companies Started as Monoliths:**
- Netflix (2007-2009: Monolith)
- Amazon (1994-2001: Monolith)
- Twitter (2006-2010: Monolith)
- Uber (2009-2012: Monolith)
- Shopify (Still largely monolithic!)

**The Reality:**
- You don't have Netflix's scale problems
- You don't have Netflix's team size
- You don't have Netflix's budget
- You DO have time-to-market pressure

**Martin Fowler's Advice:**
> "Don't even consider microservices unless you have a system that's too complex to manage as a monolith."

---

### 4.4 When Microservices Make Sense for TalyerStudio

**Extract These Services First (When You Reach Scale):**

1. **Notification Service**
   - High volume (SMS, Email, Push)
   - Independent scaling needed
   - Can be written in Node.js/Python
   - Clear boundaries

2. **Payment Service**
   - Security isolation
   - PCI compliance
   - Integration with multiple providers
   - Critical service requiring high availability

3. **Reporting/Analytics Service**
   - Heavy queries
   - Different database (ClickHouse/TimescaleDB)
   - Can scale independently
   - Read-only operations

4. **Media/File Service**
   - File uploads (images, PDFs)
   - S3 integration
   - Image processing
   - CDN integration

**Keep These in Monolith:**
- Customer Management
- Vehicle Management
- Job Orders
- Inventory
- Invoicing
- Core business logic

---

### 4.5 Preparing for Microservices (Build with Future in Mind)

**Design Principles:**

1. **Bounded Contexts**
   - Clear module boundaries
   - No shared entities across modules
   - Each module owns its data

2. **Database Per Module**
   - Use schemas in PostgreSQL
   - `customers` schema
   - `inventory` schema
   - `joborders` schema

3. **Async Communication**
   - Use events for cross-module communication
   - Domain Events pattern
   - Prepare for message broker

4. **API Contracts**
   - Well-defined DTOs
   - Versioned APIs
   - No direct database access

5. **Avoid Distributed Transactions**
   - Use Saga pattern
   - Eventual consistency
   - Compensating transactions

---

### 4.6 Hybrid Architecture (Best of Both Worlds)

**Recommended for Year 2-3:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Gateway (YARP)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚  Core    â”‚                    â”‚ Extracted â”‚
    â”‚ Monolith â”‚                    â”‚ Services  â”‚
    â”‚          â”‚                    â”‚           â”‚
    â”‚ - CRM    â”‚                    â”‚- Notif.   â”‚
    â”‚ - Jobs   â”‚â—„â”€â”€â”€â”€â”€â”€Eventsâ”€â”€â”€â”€â”€â”€â–ºâ”‚- Payment  â”‚
    â”‚ - Invent.â”‚                    â”‚- Reportingâ”‚
    â”‚ - Invoiceâ”‚                    â”‚- Media    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                               â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
    â”‚   Main   â”‚                    â”‚  Specific â”‚
    â”‚ Database â”‚                    â”‚ Databases â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 4.7 Microservices Implementation Guide (For Future)

**If You Decide to Go Microservices:**

**Service Communication:**
```csharp
// Synchronous (HTTP/gRPC)
- Customer Service â†’ Vehicle Service (Get customer vehicles)
- JobOrder Service â†’ Inventory Service (Check parts availability)

// Asynchronous (Message Broker)
- JobOrder Completed â†’ Send Notification
- Payment Received â†’ Update Invoice
- Inventory Low â†’ Send Alert
```

**Service Discovery:**
```yaml
# Consul Configuration
services:
  - name: customer-service
    port: 5001
    checks:
      - http: http://localhost:5001/health
        interval: 10s
```

**API Gateway:**
```csharp
// YARP Configuration (appsettings.json)
{
  "ReverseProxy": {
    "Routes": {
      "customer-route": {
        "ClusterId": "customer-cluster",
        "Match": {
          "Path": "/api/customers/{**catch-all}"
        }
      }
    },
    "Clusters": {
      "customer-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://customer-service:5001"
          }
        }
      }
    }
  }
}
```

**Distributed Tracing:**
```csharp
// OpenTelemetry
services.AddOpenTelemetry()
    .WithTracing(builder => builder
        .AddAspNetCoreInstrumentation()
        .AddHttpClientInstrumentation()
        .AddJaegerExporter());
```

---

### 4.8 Migration Strategy (Monolith â†’ Microservices)

**Strangler Fig Pattern:**
```
Step 1: Identify service to extract (e.g., Notifications)
Step 2: Create new microservice
Step 3: Route new requests to microservice
Step 4: Gradually migrate existing functionality
Step 5: Decommission old code from monolith
Step 6: Repeat for next service
```

**Database Migration:**
```sql
-- Step 1: Copy data to new service database
-- Step 2: Dual-write (write to both)
-- Step 3: Verify data consistency
-- Step 4: Switch reads to new database
-- Step 5: Stop writing to old database
-- Step 6: Remove old schema
```

---

### 4.9 Cost Analysis

**Monolith Costs (Year 1):**
- Server: $50/month (DigitalOcean Droplet)
- Database: $15/month (Managed PostgreSQL)
- CDN: $10/month (CloudFlare)
- Total: ~$75/month

**Microservices Costs (Hypothetical Year 1):**
- 8 Services Ã— $25 = $200/month
- 8 Databases Ã— $15 = $120/month
- Load Balancer: $30/month
- Service Mesh: $50/month
- Message Broker: $100/month
- Monitoring: $50/month
- CDN: $10/month
- Total: ~$560/month

**Difference: $485/month = $5,820/year wasted**

---

### 4.10 FINAL RECOMMENDATION

**For TalyerStudio:**

âœ… **Start with Monolith** (Clean Architecture)
- Fast time to market
- Validate business model
- Build customer base
- Learn domain
- Low costs

âœ… **Refactor to Modular Monolith** (Year 2)
- Clear boundaries
- Team growth
- Easier to maintain

âœ… **Extract Services Gradually** (Year 3+)
- Only when needed
- Based on actual bottlenecks
- Notifications first
- Then payments
- Then reporting

âŒ **Don't Start with Microservices**
- Over-engineering
- Wasted time
- Higher costs
- Delayed launch
- Premature optimization

**Remember:** You can always move FROM monolith TO microservices. It's nearly impossible to go the other way. Start simple, evolve based on real needs.

---

## 4.12 Monorepo vs Multi-Repo for Microservices

### 4.12.1 Repository Strategy Comparison

#### Option 1: Monorepo (STRONGLY RECOMMENDED)
```
talyerstudio/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Customer/
â”‚   â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Customer.API/
â”‚   â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Customer.Application/
â”‚   â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Customer.Domain/
â”‚   â”‚   â”‚   â””â”€â”€ TalyerStudio.Customer.Infrastructure/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Vehicle/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.JobOrder/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Inventory/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Invoice/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Payment/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Notification/
â”‚   â”‚   â””â”€â”€ TalyerStudio.Reporting/
â”‚   â”œâ”€â”€ Gateway/
â”‚   â”‚   â””â”€â”€ TalyerStudio.ApiGateway/
â”‚   â”œâ”€â”€ Shared/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Shared.Contracts/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Shared.Events/
â”‚   â”‚   â”œâ”€â”€ TalyerStudio.Shared.Infrastructure/
â”‚   â”‚   â””â”€â”€ TalyerStudio.Shared.gRPC/
â”‚   â””â”€â”€ Clients/
â”‚       â”œâ”€â”€ talyerstudio-dashboard/ (React)
â”‚       â”œâ”€â”€ talyerstudio-landing/ (HTML/CSS/JS)
â”‚       â””â”€â”€ talyerstudio-mobile/ (React Native)
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ Integration/
â”‚   â””â”€â”€ E2E/
â”œâ”€â”€ docs/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ deploy-all.sh
â”‚   â”œâ”€â”€ deploy-service.sh
â”‚   â””â”€â”€ run-local.sh
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â””â”€â”€ docker-compose.dev.yml
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yml
â”‚       â””â”€â”€ cd-service.yml
â””â”€â”€ TalyerStudio.sln
```

**Pros:**
- âœ… **Single source of truth** - Everything in one place
- âœ… **Shared code easily** - Common libraries, contracts, DTOs
- âœ… **Atomic commits** - Change multiple services in one PR
- âœ… **Easier refactoring** - Rename interfaces across all services
- âœ… **Consistent tooling** - One CI/CD pipeline
- âœ… **Better code review** - See full impact of changes
- âœ… **Simplified dependency management** - One NuGet.config
- âœ… **Cross-service testing** - Integration tests easier
- âœ… **Onboarding easier** - One repo to clone
- âœ… **Version synchronization** - All services stay in sync

**Cons:**
- âŒ Larger repository size (not a real issue with Git)
- âŒ Need smart CI/CD (only build changed services)
- âŒ Potential for tight coupling if not careful

**Used by:**
- Google (all code in one repo!)
- Microsoft (Windows, Office)
- Facebook/Meta
- Uber
- Airbnb
- Twitter

---

#### Option 2: Multi-Repo (Polyrepo)
```
talyerstudio-customer/
talyerstudio-vehicle/
talyerstudio-joborder/
talyerstudio-inventory/
talyerstudio-invoice/
talyerstudio-payment/
talyerstudio-notification/
talyerstudio-reporting/
talyerstudio-gateway/
talyerstudio-shared/
talyerstudio-dashboard/
talyerstudio-landing/
```

**Pros:**
- âœ… Complete service isolation
- âœ… Independent versioning
- âœ… Smaller clone size per repo
- âœ… Clear ownership boundaries

**Cons:**
- âŒ **Shared code nightmare** - Need to publish NuGet packages
- âŒ **Cross-service changes painful** - Multiple PRs required
- âŒ **Version hell** - Services get out of sync
- âŒ **Complex CI/CD** - 12+ pipelines to manage
- âŒ **Difficult refactoring** - Breaking changes across repos
- âŒ **Dependency management chaos** - Each repo has own packages
- âŒ **Testing nightmare** - Integration tests span repos
- âŒ **Onboarding hell** - Clone 12 repos, setup 12 environments

**Reality Check:**
Most companies who start with multi-repo eventually consolidate to monorepo or use a hybrid approach.

---

### 4.12.2 RECOMMENDED: Monorepo with Smart CI/CD

**Solution Structure:**
```
TalyerStudio.sln
â”œâ”€â”€ Services
â”‚   â”œâ”€â”€ Customer Service (4 projects)
â”‚   â”œâ”€â”€ Vehicle Service (4 projects)
â”‚   â”œâ”€â”€ JobOrder Service (4 projects)
â”‚   â”œâ”€â”€ Inventory Service (4 projects)
â”‚   â”œâ”€â”€ Invoice Service (4 projects)
â”‚   â”œâ”€â”€ Payment Service (4 projects)
â”‚   â”œâ”€â”€ Notification Service (4 projects)
â”‚   â””â”€â”€ Reporting Service (4 projects)
â”œâ”€â”€ Gateway
â”‚   â””â”€â”€ API Gateway (1 project)
â”œâ”€â”€ Shared
â”‚   â”œâ”€â”€ Contracts (1 project)
â”‚   â”œâ”€â”€ Events (1 project)
â”‚   â”œâ”€â”€ Infrastructure (1 project)
â”‚   â””â”€â”€ gRPC Protos (1 project)
â””â”€â”€ Tests
    â”œâ”€â”€ Integration Tests
    â””â”€â”€ E2E Tests

Total: ~40 projects in ONE solution
```

**Smart CI/CD Pipeline:**
```yaml
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [main, develop]
  pull_request:

jobs:
  detect-changes:
    runs-on: ubuntu-latest
    outputs:
      customer: ${{ steps.changes.outputs.customer }}
      vehicle: ${{ steps.changes.outputs.vehicle }}
      # ... other services
    steps:
      - uses: actions/checkout@v3
      - uses: dorny/paths-filter@v2
        id: changes
        with:
          filters: |
            customer:
              - 'src/Services/TalyerStudio.Customer/**'
              - 'src/Shared/**'
            vehicle:
              - 'src/Services/TalyerStudio.Vehicle/**'
              - 'src/Shared/**'
            # ... other services

  build-customer:
    needs: detect-changes
    if: ${{ needs.detect-changes.outputs.customer == 'true' }}
    runs-on: ubuntu-latest
    steps:
      - name: Build Customer Service
        run: dotnet build src/Services/TalyerStudio.Customer/
      - name: Run Tests
        run: dotnet test src/Services/TalyerStudio.Customer/
      - name: Build Docker Image
        run: docker build -t talyerstudio-customer:${{ github.sha }}

  # Repeat for other services...
```

**Result:** Only changed services are built and deployed!

---

### 4.12.3 Service Communication in Monorepo

**HTTP/REST API Communication:**
```csharp
// Shared Contracts (in monorepo)
// src/Shared/TalyerStudio.Shared.Contracts/Customers/CustomerDto.cs
namespace TalyerStudio.Shared.Contracts.Customers;

public class CustomerDto
{
    public Guid Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string PhoneNumber { get; set; }
}

// Vehicle Service calling Customer Service
// src/Services/TalyerStudio.Vehicle/Application/Services/VehicleService.cs
public class VehicleService
{
    private readonly HttpClient _httpClient;

    public VehicleService(IHttpClientFactory httpClientFactory)
    {
        _httpClient = httpClientFactory.CreateClient("CustomerService");
    }

    public async Task<CustomerDto> GetCustomerAsync(Guid customerId)
    {
        var response = await _httpClient.GetAsync($"api/customers/{customerId}");
        response.EnsureSuccessStatusCode();
        return await response.Content.ReadFromJsonAsync<CustomerDto>();
    }
}

// Configuration
services.AddHttpClient("CustomerService", client =>
{
    client.BaseAddress = new Uri("http://customer-service:5001");
});
```

**gRPC Communication (RECOMMENDED for internal services):**
```protobuf
// src/Shared/TalyerStudio.Shared.gRPC/Protos/customer.proto
syntax = "proto3";

package talyerstudio.customer;

service CustomerService {
  rpc GetCustomer (GetCustomerRequest) returns (CustomerResponse);
  rpc GetCustomers (GetCustomersRequest) returns (CustomersResponse);
}

message GetCustomerRequest {
  string customer_id = 1;
}

message CustomerResponse {
  string id = 1;
  string first_name = 2;
  string last_name = 3;
  string phone_number = 4;
}
```

```csharp
// Vehicle Service calling Customer Service via gRPC
// src/Services/TalyerStudio.Vehicle/Application/Services/VehicleService.cs
public class VehicleService
{
    private readonly CustomerService.CustomerServiceClient _customerClient;

    public VehicleService(CustomerService.CustomerServiceClient customerClient)
    {
        _customerClient = customerClient;
    }

    public async Task<CustomerResponse> GetCustomerAsync(Guid customerId)
    {
        return await _customerClient.GetCustomerAsync(
            new GetCustomerRequest { CustomerId = customerId.ToString() }
        );
    }
}

// Configuration
services.AddGrpcClient<CustomerService.CustomerServiceClient>(o =>
{
    o.Address = new Uri("http://customer-service:5002"); // gRPC port
});
```

**Why gRPC for internal communication:**
- âš¡ 7-10x faster than REST
- ğŸ“¦ Smaller payload (binary)
- ğŸ’ª Strongly typed contracts
- ğŸ”„ Bidirectional streaming
- ğŸ›¡ï¸ Built-in error handling

**Use REST/HTTP for:**
- External APIs (Dashboard, Mobile Apps)
- Third-party integrations
- Public APIs

**Use gRPC for:**
- Internal service-to-service communication
- High-performance needs
- Type-safe contracts

---

### 4.12.4 Event-Driven Communication (Async)

**Shared Events in Monorepo:**
```csharp
// src/Shared/TalyerStudio.Shared.Events/JobOrders/JobOrderCompletedEvent.cs
namespace TalyerStudio.Shared.Events.JobOrders;

public class JobOrderCompletedEvent
{
    public Guid JobOrderId { get; set; }
    public Guid CustomerId { get; set; }
    public Guid VehicleId { get; set; }
    public decimal TotalAmount { get; set; }
    public DateTime CompletedAt { get; set; }
}

// JobOrder Service publishes event
public class JobOrderService
{
    private readonly IMessageBus _messageBus;

    public async Task CompleteJobOrderAsync(Guid jobOrderId)
    {
        // Complete job order logic...
        
        // Publish event
        await _messageBus.PublishAsync(new JobOrderCompletedEvent
        {
            JobOrderId = jobOrderId,
            CustomerId = customerId,
            VehicleId = vehicleId,
            TotalAmount = totalAmount,
            CompletedAt = DateTime.UtcNow
        });
    }
}

// Invoice Service subscribes to event
public class JobOrderCompletedEventHandler : IEventHandler<JobOrderCompletedEvent>
{
    public async Task HandleAsync(JobOrderCompletedEvent @event)
    {
        // Create invoice from completed job order
        await _invoiceService.CreateInvoiceFromJobOrderAsync(@event);
    }
}

// Notification Service subscribes to same event
public class SendCompletionNotificationHandler : IEventHandler<JobOrderCompletedEvent>
{
    public async Task HandleAsync(JobOrderCompletedEvent @event)
    {
        // Send SMS to customer
        await _notificationService.SendJobCompletedNotificationAsync(@event);
    }
}
```

**Message Bus Implementation:**
```csharp
// src/Shared/TalyerStudio.Shared.Infrastructure/Messaging/RabbitMqMessageBus.cs
public class RabbitMqMessageBus : IMessageBus
{
    private readonly IConnection _connection;

    public async Task PublishAsync<T>(T @event) where T : class
    {
        var channel = _connection.CreateModel();
        var eventName = typeof(T).Name;
        
        channel.ExchangeDeclare(exchange: "talyerstudio", type: ExchangeType.Topic);
        
        var message = JsonSerializer.Serialize(@event);
        var body = Encoding.UTF8.GetBytes(message);
        
        channel.BasicPublish(
            exchange: "talyerstudio",
            routingKey: eventName,
            body: body
        );
    }
}
```

---

### 4.12.5 Local Development with Docker Compose

**docker-compose.dev.yml (in monorepo root):**
```yaml
version: '3.8'

services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_PASSWORD: dev_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  rabbitmq:
    image: rabbitmq:3-management-alpine
    ports:
      - "5672:5672"
      - "15672:15672"

  customer-service:
    build:
      context: .
      dockerfile: src/Services/TalyerStudio.Customer/TalyerStudio.Customer.API/Dockerfile
    ports:
      - "5001:80"
      - "5002:443"
    environment:
      - ConnectionStrings__Database=Host=postgres;Database=talyerstudio_customers;...
      - RabbitMQ__Host=rabbitmq
    depends_on:
      - postgres
      - rabbitmq

  vehicle-service:
    build:
      context: .
      dockerfile: src/Services/TalyerStudio.Vehicle/TalyerStudio.Vehicle.API/Dockerfile
    ports:
      - "5011:80"
      - "5012:443"
    environment:
      - ConnectionStrings__Database=Host=postgres;Database=talyerstudio_vehicles;...
      - RabbitMQ__Host=rabbitmq
      - ServiceUrls__CustomerService=http://customer-service
    depends_on:
      - postgres
      - rabbitmq
      - customer-service

  # ... other services

  api-gateway:
    build:
      context: .
      dockerfile: src/Gateway/TalyerStudio.ApiGateway/Dockerfile
    ports:
      - "5000:80"
    environment:
      - ServiceUrls__CustomerService=http://customer-service
      - ServiceUrls__VehicleService=http://vehicle-service
      # ... other services
    depends_on:
      - customer-service
      - vehicle-service
      # ... other services

volumes:
  postgres_data:
```

**Run everything locally:**
```bash
# Start all services
docker-compose -f docker-compose.dev.yml up

# Start specific services
docker-compose -f docker-compose.dev.yml up customer-service vehicle-service

# Rebuild and restart
docker-compose -f docker-compose.dev.yml up --build
```

---

### 4.12.6 Hybrid Approach: Monorepo with Workspace Services

**For Very Large Teams (Future):**
```
talyerstudio/ (Monorepo)
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ core/ (Core business services - main team)
â”‚   â”‚   â”œâ”€â”€ customer/
â”‚   â”‚   â”œâ”€â”€ vehicle/
â”‚   â”‚   â”œâ”€â”€ joborder/
â”‚   â”‚   â””â”€â”€ inventory/
â”‚   â”œâ”€â”€ financial/ (Financial team)
â”‚   â”‚   â”œâ”€â”€ invoice/
â”‚   â”‚   â””â”€â”€ payment/
â”‚   â””â”€â”€ platform/ (Platform team)
â”‚       â”œâ”€â”€ notification/
â”‚       â””â”€â”€ reporting/
â”œâ”€â”€ shared/
â”œâ”€â”€ clients/
â””â”€â”€ infrastructure/
```

**Benefits:**
- Clear team ownership
- Still share common code
- Can have team-specific CI/CD
- Easier to manage permissions

---

### 4.12.7 FINAL RECOMMENDATION

**For TalyerStudio:**

âœ… **Use Monorepo** from Day 1
- Start with monolith in monorepo
- Evolve to microservices in same monorepo
- Use gRPC for service-to-service communication
- Use Events (RabbitMQ) for async operations
- Use Docker Compose for local development

**Communication Strategy:**
```
External (Dashboard/Mobile) 
    â†“
  REST API
    â†“
API Gateway
    â†“
  gRPC (internal fast communication)
    â†“
Microservices
    â†“
Event Bus (async operations)
```

**Structure Evolution:**
```
Month 1-6: Monolith in monorepo
    â†“
Month 7-12: Modular monolith in monorepo
    â†“
Year 2: Extract Notification + Payment services (still same monorepo)
    â†“
Year 3: Extract more services as needed (still same monorepo)
```

**Why This Works:**
- âœ… One codebase to manage
- âœ… Shared contracts and DTOs
- âœ… Easy refactoring
- âœ… Simple CI/CD
- âœ… Fast service-to-service calls (gRPC)
- âœ… Async events when needed
- âœ… Can still deploy services independently
- âœ… Best of both worlds

**Tools to Help:**
- **Nx** - Monorepo build system (optional)
- **Turborepo** - Fast monorepo builds (optional)
- **GitHub Actions** - Smart CI/CD with path filters
- **Docker Compose** - Local development
- **Tye** - Microsoft's local microservices runner

---

## 4.13 Project Structure (.NET 8 Monolith)

```
TalyerStudio.API/
â”œâ”€â”€ TalyerStudio.API (Web API Layer)
â”œâ”€â”€ TalyerStudio.Core (Domain Models, Interfaces)
â”œâ”€â”€ TalyerStudio.Application (Business Logic, Services)
â”œâ”€â”€ TalyerStudio.Infrastructure (Data Access, External Services)
â””â”€â”€ TalyerStudio.Shared (Common Utilities, DTOs)
```

### 4.2 Key API Endpoints

```
Authentication & Authorization
POST   /api/auth/register
POST   /api/auth/login
POST   /api/auth/refresh
POST   /api/auth/logout
POST   /api/auth/forgot-password
POST   /api/auth/reset-password

Tenants & Branches
GET    /api/tenants/{tenantId}
PUT    /api/tenants/{tenantId}
GET    /api/tenants/{tenantId}/branches
POST   /api/tenants/{tenantId}/branches

Customers
GET    /api/customers
POST   /api/customers
GET    /api/customers/{id}
PUT    /api/customers/{id}
DELETE /api/customers/{id}
GET    /api/customers/{id}/vehicles
GET    /api/customers/{id}/job-orders
GET    /api/customers/{id}/invoices

Vehicles
POST   /api/customers/{customerId}/vehicles
GET    /api/vehicles/{id}
PUT    /api/vehicles/{id}
GET    /api/vehicles/{id}/service-history

Job Orders
GET    /api/job-orders
POST   /api/job-orders
GET    /api/job-orders/{id}
PUT    /api/job-orders/{id}
PATCH  /api/job-orders/{id}/status
POST   /api/job-orders/{id}/assign-mechanic
POST   /api/job-orders/{id}/complete

Services
GET    /api/services
POST   /api/services
PUT    /api/services/{id}
DELETE /api/services/{id}

Inventory
GET    /api/products
POST   /api/products
GET    /api/products/{id}
PUT    /api/products/{id}
GET    /api/products/{id}/stock-levels
POST   /api/products/{id}/adjust-stock
GET    /api/products/low-stock

Invoices & Payments
GET    /api/invoices
POST   /api/invoices
GET    /api/invoices/{id}
POST   /api/invoices/{id}/payments
GET    /api/invoices/{id}/pdf

Appointments
GET    /api/appointments
POST   /api/appointments
PUT    /api/appointments/{id}
DELETE /api/appointments/{id}
GET    /api/appointments/calendar

Reports
GET    /api/reports/sales
GET    /api/reports/services
GET    /api/reports/inventory
GET    /api/reports/dashboard

Notifications
GET    /api/notifications
POST   /api/notifications/send-sms
POST   /api/notifications/send-email

Settings
GET    /api/settings
PUT    /api/settings
```

### 4.3 API Features

**Security:**
- JWT authentication with refresh tokens
- Role-based authorization
- API rate limiting
- CORS configuration
- SQL injection prevention (EF Core parameterization)
- XSS protection

**Performance:**
- Response caching (Redis)
- Database query optimization
- Pagination for list endpoints
- Lazy loading strategies
- CDN for static assets

**Monitoring:**
- Structured logging (Serilog)
- Application Insights / ELK Stack
- Health checks endpoint
- Performance metrics

---

## 5. DASHBOARD ARCHITECTURE (React)

### 5.1 Folder Structure

```
talyerstudio-dashboard/
â”œâ”€â”€ public/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Table.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Forms/
â”‚   â”‚   â”œâ”€â”€ customers/
â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerList.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ CustomerDetail.tsx
â”‚   â”‚   â”œâ”€â”€ vehicles/
â”‚   â”‚   â”œâ”€â”€ joborders/
â”‚   â”‚   â”œâ”€â”€ inventory/
â”‚   â”‚   â”œâ”€â”€ pos/
â”‚   â”‚   â””â”€â”€ reports/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ Customers/
â”‚   â”‚   â”œâ”€â”€ JobOrders/
â”‚   â”‚   â”œâ”€â”€ Inventory/
â”‚   â”‚   â”œâ”€â”€ Invoices/
â”‚   â”‚   â”œâ”€â”€ Appointments/
â”‚   â”‚   â”œâ”€â”€ Reports/
â”‚   â”‚   â””â”€â”€ Settings/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”œâ”€â”€ customerService.ts
â”‚   â”‚   â”œâ”€â”€ jobOrderService.ts
â”‚   â”‚   â””â”€â”€ authService.ts
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”œâ”€â”€ useCustomers.ts
â”‚   â”‚   â””â”€â”€ useJobOrders.ts
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”œâ”€â”€ authStore.ts
â”‚   â”‚   â”œâ”€â”€ tenantStore.ts
â”‚   â”‚   â””â”€â”€ uiStore.ts
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ formatters.ts
â”‚   â”‚   â”œâ”€â”€ validators.ts
â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”œâ”€â”€ types/
â”‚   â””â”€â”€ App.tsx
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

### 5.2 Key UI Pages

**Dashboard Home:**
- Revenue cards (today, week, month)
- Recent job orders
- Pending appointments
- Low stock alerts
- Quick actions

**Customer Management:**
- Customer list with search/filter
- Customer profile with tabs (Info, Vehicles, History)
- Add/Edit customer form
- Vehicle registration

**Job Order Management:**
- Kanban board view (Pending, In Progress, Completed)
- Job order creation wizard
- Job order detail with checklist
- Print job order

**POS/Cashier:**
- Quick service selection
- Calculator-style interface
- Payment processing
- Receipt printing

**Inventory:**
- Product list with stock levels
- Stock adjustment
- Purchase order creation
- Low stock alerts

**Appointment Calendar:**
- Full calendar view
- Drag-and-drop scheduling
- Appointment creation modal

**Reports:**
- Date range selector
- Visual charts (Chart.js/Recharts)
- Export buttons
- Print-friendly views

### 5.3 State Management

**Zustand Stores:**
- Auth Store (user, token, permissions)
- Tenant Store (current shop, branch)
- UI Store (modals, notifications, loading)
- Cart Store (for POS)

**React Query:**
- API data fetching and caching
- Optimistic updates
- Infinite scroll pagination

---

## 6. LANDING PAGE (talyerstudio.com)

### 6.1 Page Structure

```
- Hero Section (with CTA)
- Features Section
- How It Works
- Pricing Plans
- Testimonials
- FAQ
- Contact Form
- Footer
```

### 6.2 Key Features

- Fully responsive design
- Fast loading (optimized images)
- SEO optimized (meta tags, schema markup)
- Lead capture forms
- Live chat integration (Tawk.to)
- Blog section (optional)

### 6.3 Conversion Focus

- Free trial signup
- Demo request
- Pricing transparency
- Philippine market messaging (Tagalog option)

---

## 7. MOBILE APP ARCHITECTURE (Future)

### 7.1 Mechanic Mobile App

**Target Users:** Mechanics, Technicians, Shop Staff

**Core Features:**
- Login with shop credentials
- View assigned job orders
- Update job status
- Add service notes and photos
- Check parts availability
- Time tracking (clock in/out)
- View performance metrics
- Push notifications for new assignments

**Technology:**
- React Native (iOS + Android)
- Offline-first capability
- Camera integration
- Push notifications (Firebase)

### 7.2 Customer Mobile App (White-label)

**Target Users:** End customers of shops

**Core Features:**
- Book appointments
- View vehicle service history
- Receive service reminders
- Track job order status
- View invoices and make payments
- Loyalty points tracking
- Contact shop
- Custom branding (shop logo, name, colors)

**White-label Approach:**
- Single codebase
- Dynamic theming per shop
- Custom app store listings (optional)
- Deep linking to specific shop

**Technology:**
- React Native or Flutter
- White-label configuration system
- In-app payment integration

---

## 8. DEPLOYMENT & INFRASTRUCTURE

### 8.1 Hosting Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CloudFlare CDN                     â”‚
â”‚                  (DNS + DDoS Protection)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Landing    â”‚    â”‚   Dashboard   â”‚
â”‚  (S3/CDN)    â”‚    â”‚   (S3/CDN)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   API Server   â”‚
                    â”‚ (AWS EC2/ECS)  â”‚
                    â”‚  Load Balancer â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚  PostgreSQL  â”‚    â”‚     Redis     â”‚  â”‚   S3      â”‚
â”‚  (RDS/DO)    â”‚    â”‚    Cache      â”‚  â”‚  Storage  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Deployment Strategy

**Development:**
- GitHub/GitLab repository
- Feature branch workflow
- Pull request reviews

**CI/CD Pipeline:**
- GitHub Actions / GitLab CI
- Automated testing
- Staging deployment
- Production deployment (manual approval)

**Environments:**
- Development (dev.api.talyerstudio.com)
- Staging (staging.api.talyerstudio.com)
- Production (api.talyerstudio.com)

### 8.3 Monitoring & Maintenance

**Application Monitoring:**
- Uptime monitoring (UptimeRobot)
- Error tracking (Sentry)
- Performance monitoring (Application Insights)
- Log aggregation (ELK Stack / CloudWatch)

**Database:**
- Automated backups (daily)
- Point-in-time recovery
- Replication (read replicas)
- Query performance monitoring

**Security:**
- SSL certificates (Let's Encrypt)
- Regular security audits
- Dependency vulnerability scanning
- Penetration testing (annual)

---

## 9. DEVELOPMENT ROADMAP

### Phase 1: MVP (Months 1-3)

**Month 1: Foundation**
- [ ] Database schema design and implementation
- [ ] .NET 8 API project setup (Clean Architecture)
- [ ] Authentication & authorization system
- [ ] Multi-tenancy implementation
- [ ] React dashboard project setup
- [ ] Basic UI components library

**Month 2: Core Features**
- [ ] Customer management module
- [ ] Vehicle management module
- [ ] Service catalog
- [ ] Job order creation and management
- [ ] Basic inventory (products, stock levels)
- [ ] Invoice generation
- [ ] Payment recording

**Month 3: Essential Features**
- [ ] POS/Cashier interface
- [ ] Appointment scheduling
- [ ] SMS notifications (Semaphore integration)
- [ ] Basic reporting (sales, services)
- [ ] Dashboard home page
- [ ] Landing page (HTML/CSS/JS)
- [ ] Beta testing with 3-5 shops

**MVP Launch:** End of Month 3

### Phase 2: Enhanced Features (Months 4-6)

**Month 4:**
- [ ] Advanced inventory (purchase orders, stock transfers)
- [ ] Employee/Staff management
- [ ] Role-based permissions refinement
- [ ] Service packages and bundles
- [ ] Customer groups and segmentation
- [ ] Enhanced reporting with charts

**Month 5:**
- [ ] Loyalty points system
- [ ] Marketing campaigns (SMS/Email)
- [ ] Promo codes and discounts
- [ ] Estimates/Quotations
- [ ] Before/After photo uploads
- [ ] Receipt customization

**Month 6:**
- [ ] Online appointment booking (embeddable widget)
- [ ] Payment gateway integration (PayMongo, GCash, Maya)
- [ ] Multi-branch support
- [ ] Advanced analytics dashboard
- [ ] API documentation (Swagger)
- [ ] User onboarding tutorial

**Phase 2 Launch:** End of Month 6

### Phase 3: Scale & Optimize (Months 7-9)

**Month 7:**
- [ ] Performance optimization
- [ ] Database query optimization
- [ ] Caching implementation (Redis)
- [ ] API rate limiting
- [ ] Advanced search and filters
- [ ] Bulk operations (imports/exports)

**Month 8:**
- [ ] Mobile-responsive dashboard improvements
- [ ] Offline mode (service worker)
- [ ] Real-time notifications (SignalR)
- [ ] Webhook system for integrations
- [ ] Advanced inventory forecasting
- [ ] Commission tracking

**Month 9:**
- [ ] White-label options (custom domain, branding)
- [ ] API for third-party integrations
- [ ] Accounting software integration prep
- [ ] Advanced security features (2FA)
- [ ] Compliance features (BIR requirements)
- [ ] Public API for partner integrations

### Phase 4: Mobile Apps (Months 10-12)

**Month 10-11: Mechanic App**
- [ ] React Native project setup
- [ ] Mechanic login and authentication
- [ ] Job order list and details
- [ ] Status updates and notes
- [ ] Photo uploads
- [ ] Time tracking
- [ ] Push notifications
- [ ] Beta testing

**Month 12: Customer App (White-label)**
- [ ] Customer app core features
- [ ] Appointment booking
- [ ] Service history
- [ ] Payment integration
- [ ] White-label configuration system
- [ ] Testing and launch

**Year 1 Complete:** Full platform with mobile apps

### Phase 5: Advanced Features (Year 2+)

**Q1 Year 2:**
- [ ] AI-powered service recommendations
- [ ] Automated parts ordering
- [ ] Predictive maintenance alerts
- [ ] Advanced analytics with ML
- [ ] Integration marketplace

**Q2 Year 2:**
- [ ] Franchise management features
- [ ] Multi-currency support (for expansion)
- [ ] Advanced CRM with lead tracking
- [ ] Customer portal
- [ ] Fleet management features

**Q3-Q4 Year 2:**
- [ ] Regional expansion (Southeast Asia)
- [ ] Language support (Tagalog, Cebuano, etc.)
- [ ] Supplier portal
- [ ] B2B features (corporate accounts)
- [ ] Insurance integration

---

## 10. PRICING STRATEGY

### 10.1 Subscription Plans (Philippine Market)

**Starter Plan: â‚±999/month**
- 1 branch
- Up to 100 customers
- 50 job orders/month
- Basic inventory (200 products)
- 1 staff account
- Email support

**Professional Plan: â‚±2,499/month**
- Up to 3 branches
- Unlimited customers
- Unlimited job orders
- Full inventory management
- 5 staff accounts
- SMS notifications (500 credits)
- Priority support
- Basic reports

**Enterprise Plan: â‚±4,999/month**
- Unlimited branches
- Unlimited everything
- 10+ staff accounts
- SMS notifications (2000 credits)
- Advanced reports
- API access
- Custom branding
- Dedicated support
- Mobile apps access

**Add-ons:**
- Additional staff account: â‚±199/month
- Extra SMS credits: â‚±0.50/SMS
- Custom domain: â‚±499/month
- White-label customer app: â‚±1,999/month

### 10.2 Free Trial
- 14-day free trial (no credit card required)
- Full access to Professional features
- Onboarding assistance

---

## 11. GO-TO-MARKET STRATEGY

### 11.1 Target Customers (Philippines)

**Primary:**
- Small to medium auto repair shops (5-20 employees)
- Car wash and detailing centers
- Motorcycle repair shops
- Multi-service automotive centers

**Secondary:**
- Auto parts retailers with service centers
- Franchise auto service chains
- Mobile mechanics transitioning to shops

### 11.2 Marketing Channels

**Digital:**
- Facebook Ads (highly effective in PH)
- Google Ads (search: "auto shop system PH")
- Facebook Groups (auto shop owners)
- YouTube tutorials (shop management tips)
- TikTok (behind-the-scenes, features)

**Content Marketing:**
- Blog: Auto shop management tips
- Case studies from beta users
- Video testimonials
- Free resources (inventory templates, checklists)

**Partnerships:**
- Auto parts suppliers
- Car wash equipment suppliers
- Automotive associations
- Trade shows and expos

**Referral Program:**
- â‚±500 credit for referrer
- 1 month free for new customer

### 11.3 Sales Strategy

**Self-Service:**
- Online signup and onboarding
- Video tutorials
- Knowledge base

**Assisted:**
- Free demo calls
- On-site demos for enterprise
- Setup assistance (â‚±2,000 one-time)

**Localization:**
- Tagalog support option
- Filipino customer success team
- Philippine-specific features (GCash, Maya, etc.)

---

## 12. SUCCESS METRICS (KPIs)

### 12.1 Business Metrics

**Revenue:**
- Monthly Recurring Revenue (MRR)
- Annual Recurring Revenue (ARR)
- Average Revenue Per User (ARPU)
- Customer Lifetime Value (LTV)

**Growth:**
- New signups per month
- Activation rate (trial to paid)
- Churn rate (target: <5%)
- Net Revenue Retention

### 12.2 Product Metrics

**Engagement:**
- Daily Active Users (DAU)
- Monthly Active Users (MAU)
- Feature adoption rates
- Job orders created per shop
- Invoices generated

**Performance:**
- API response times (<200ms)
- Dashboard load time (<2s)
- Uptime (target: 99.9%)
- Error rates (<0.1%)

**Customer Success:**
- Time to first job order (<24 hours)
- Support ticket resolution time
- Net Promoter Score (NPS)
- Customer satisfaction (CSAT)

---

## 13. RISK MITIGATION

### 13.1 Technical Risks

**Risk:** Database performance degradation
**Mitigation:** Regular optimization, read replicas, caching layer

**Risk:** API downtime
**Mitigation:** Load balancing, health checks, auto-scaling, monitoring

**Risk:** Data loss
**Mitigation:** Automated daily backups, point-in-time recovery, replication

**Risk:** Security breaches
**Mitigation:** Regular security audits, penetration testing, SOC 2 compliance path

### 13.2 Business Risks

**Risk:** Low adoption rate
**Mitigation:** Extended free trial, freemium model, strong onboarding

**Risk:** High churn
**Mitigation:** Customer success program, feature requests, regular check-ins

**Risk:** Competition
**Mitigation:** Philippine market focus, superior UX, competitive pricing

**Risk:** Payment collection (in PH)
**Mitigation:** Multiple payment methods, automated reminders, annual plans

---

## 14. TEAM REQUIREMENTS

### 14.1 Recommended Team (MVP)

**Core Team:**
- 1 Full-Stack Developer (You) - API + React
- 1 UI/UX Designer (part-time/contract)
- 1 QA Tester (part-time)

**As You Scale:**
- 1 Backend Developer (.NET specialist)
- 1 Frontend Developer (React specialist)
- 1 Mobile Developer (React Native)
- 1 DevOps Engineer
- 1 Customer Success Manager
- 1 Sales/Marketing Lead

### 14.2 Development Tools

- IDE: Visual Studio / VS Code / Rider
- Design: Figma
- Project Management: Linear / Notion / Jira
- Communication: Slack / Discord
- Version Control: GitHub / GitLab
- Documentation: Notion / Confluence

---

## 15. NEXT STEPS (Action Plan)

### Immediate Actions (Week 1-2):

1. **Validate the Market**
   - Interview 10 auto shop owners in your area
   - Identify top 3 pain points
   - Validate pricing assumptions

2. **Setup Infrastructure**
   - Purchase domain: talyerstudio.com
   - Setup hosting accounts (AWS/DO)
   - Setup development environment
   - Create GitHub repositories

3. **Design Phase**
   - Create wireframes for core screens
   - Design database schema
   - Create API contract/documentation
   - Design system/component library

4. **Development Kickoff**
   - Setup .NET 8 API project with Clean Architecture
   - Setup React dashboard with Vite
   - Setup PostgreSQL database
   - Create initial migrations
   - Implement authentication flow

### Week 3-4:

5. **Build Core Foundation**
   - Complete multi-tenancy implementation
   - Build customer CRUD operations
   - Build vehicle CRUD operations
   - Create first API endpoints
   - Build dashboard login and home page

6. **Start Beta Recruitment**
   - Reach out to 5-10 shops for beta testing
   - Create onboarding materials
   - Setup feedback channels

---

## 16. TECHNICAL IMPLEMENTATION DETAILS

### 16.1 Database Indexes (Performance Optimization)

```sql
-- Critical indexes for performance
CREATE INDEX idx_customers_tenant_id ON customers(tenant_id);
CREATE INDEX idx_customers_phone ON customers(phone_number);
CREATE INDEX idx_customers_email ON customers(email);

CREATE INDEX idx_vehicles_customer_id ON vehicles(customer_id);
CREATE INDEX idx_vehicles_plate_number ON vehicles(plate_number);

CREATE INDEX idx_job_orders_tenant_id ON job_orders(tenant_id);
CREATE INDEX idx_job_orders_customer_id ON job_orders(customer_id);
CREATE INDEX idx_job_orders_vehicle_id ON job_orders(vehicle_id);
CREATE INDEX idx_job_orders_status ON job_orders(status);
CREATE INDEX idx_job_orders_created_at ON job_orders(created_at DESC);

CREATE INDEX idx_invoices_tenant_id ON invoices(tenant_id);
CREATE INDEX idx_invoices_customer_id ON invoices(customer_id);
CREATE INDEX idx_invoices_status ON invoices(status);
CREATE INDEX idx_invoices_due_date ON invoices(due_date);

CREATE INDEX idx_products_tenant_id ON products(tenant_id);
CREATE INDEX idx_products_sku ON products(sku);

CREATE INDEX idx_appointments_tenant_id ON appointments(tenant_id);
CREATE INDEX idx_appointments_date ON appointments(appointment_date);

-- Full-text search indexes
CREATE INDEX idx_customers_search ON customers USING gin(to_tsvector('english', name || ' ' || COALESCE(phone_number, '')));
CREATE INDEX idx_products_search ON products USING gin(to_tsvector('english', name || ' ' || COALESCE(sku, '')));
```

### 16.2 API Response Format (Standardization)

```json
// Success Response
{
  "success": true,
  "data": {
    // actual data
  },
  "message": "Operation successful",
  "timestamp": "2025-10-07T10:30:00Z"
}

// Error Response
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid input data",
    "details": [
      {
        "field": "phone_number",
        "message": "Phone number is required"
      }
    ]
  },
  "timestamp": "2025-10-07T10:30:00Z"
}

// Paginated Response
{
  "success": true,
  "data": {
    "items": [...],
    "pagination": {
      "page": 1,
      "pageSize": 20,
      "totalItems": 150,
      "totalPages": 8,
      "hasNext": true,
      "hasPrevious": false
    }
  }
}
```

### 16.3 Authentication Flow

```
1. User Login
   POST /api/auth/login
   { email, password }
   â†“
   Returns: { accessToken, refreshToken, user }

2. Authenticated Requests
   Headers: Authorization: Bearer {accessToken}
   â†“
   API validates JWT, extracts tenantId, userId
   â†“
   Request processed with tenant context

3. Token Refresh
   POST /api/auth/refresh
   { refreshToken }
   â†“
   Returns: { accessToken }

4. Token Expiry
   Access Token: 1 hour
   Refresh Token: 7 days
```

### 16.4 Multi-Tenancy Implementation

```csharp
// Tenant Context Service
public class TenantContext
{
    public Guid TenantId { get; set; }
    public Guid UserId { get; set; }
    public Guid? BranchId { get; set; }
}

// Global Query Filter in DbContext
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
    modelBuilder.Entity<Customer>()
        .HasQueryFilter(c => c.TenantId == _tenantContext.TenantId);
    
    modelBuilder.Entity<JobOrder>()
        .HasQueryFilter(j => j.TenantId == _tenantContext.TenantId);
    
    // Apply to all tenant-scoped entities
}

// Middleware to extract tenant from JWT
public class TenantMiddleware
{
    public async Task InvokeAsync(HttpContext context)
    {
        var tenantId = context.User.FindFirst("tenantId")?.Value;
        if (!string.IsNullOrEmpty(tenantId))
        {
            _tenantContext.TenantId = Guid.Parse(tenantId);
        }
        await _next(context);
    }
}
```

### 16.5 Real-time Updates (SignalR)

```csharp
// Hub for real-time notifications
public class NotificationHub : Hub
{
    public async Task JoinTenantGroup(string tenantId)
    {
        await Groups.AddToGroupAsync(Context.ConnectionId, $"tenant_{tenantId}");
    }

    public async Task NotifyJobOrderUpdate(string tenantId, JobOrderDto jobOrder)
    {
        await Clients.Group($"tenant_{tenantId}")
            .SendAsync("JobOrderUpdated", jobOrder);
    }
}

// Client-side (React)
const connection = new HubConnectionBuilder()
    .withUrl('https://api.talyerstudio.com/hubs/notifications')
    .build();

connection.on('JobOrderUpdated', (jobOrder) => {
    // Update UI in real-time
    queryClient.invalidateQueries(['job-orders']);
});
```

### 16.6 File Upload Strategy

```csharp
// S3 Upload Service
public interface IFileStorageService
{
    Task<string> UploadFileAsync(IFormFile file, string folder);
    Task DeleteFileAsync(string fileUrl);
}

// Allowed file types
- Images: .jpg, .jpeg, .png, .webp (max 5MB)
- Documents: .pdf (max 10MB)
- Max files per upload: 10

// File naming convention
{tenantId}/{module}/{timestamp}_{randomId}.{extension}
Example: abc123/job-orders/20251007_xyz789.jpg

// Storage structure
/tenants/{tenantId}/
  /job-orders/
  /vehicles/
  /invoices/
  /products/
```

---

## 17. SECURITY CONSIDERATIONS

### 17.1 Security Checklist

**Authentication & Authorization:**
- âœ“ JWT with short expiry (1 hour)
- âœ“ Refresh token rotation
- âœ“ Role-based access control (RBAC)
- âœ“ Password hashing (bcrypt, cost factor 12)
- âœ“ Account lockout after failed attempts
- âœ“ 2FA support (future)

**API Security:**
- âœ“ HTTPS only (TLS 1.3)
- âœ“ CORS configuration
- âœ“ Rate limiting (100 req/min per user)
- âœ“ Request size limits
- âœ“ SQL injection prevention (EF Core)
- âœ“ XSS protection (input sanitization)
- âœ“ CSRF tokens for state-changing operations

**Data Security:**
- âœ“ Encryption at rest (database)
- âœ“ Encryption in transit (TLS)
- âœ“ Sensitive data masking in logs
- âœ“ Regular backups
- âœ“ Audit logs for critical operations

**Infrastructure:**
- âœ“ DDoS protection (CloudFlare)
- âœ“ WAF (Web Application Firewall)
- âœ“ Regular security patches
- âœ“ Vulnerability scanning
- âœ“ Penetration testing (annual)

### 17.2 Data Privacy (Philippine Context)

**Data Privacy Act of 2012 Compliance:**
- Privacy policy clearly displayed
- Terms of service acceptance
- User consent for data collection
- Right to access personal data
- Right to data deletion
- Data breach notification procedures
- Data retention policies

**Customer Data:**
- Store only necessary information
- Allow customers to request data deletion
- Provide data export functionality
- Anonymize data in analytics

---

## 18. PERFORMANCE OPTIMIZATION

### 18.1 Backend Optimization

**Database:**
- Connection pooling
- Query optimization (avoid N+1)
- Proper indexing
- Materialized views for reports
- Read replicas for heavy queries
- Partitioning for large tables

**Caching Strategy:**
```
Level 1: In-Memory Cache (IMemoryCache)
- User sessions
- Tenant settings
- Product catalog (5 min TTL)

Level 2: Redis Cache
- Frequently accessed data
- API responses (1-5 min TTL)
- Session storage

Level 3: CDN
- Static assets
- Images
- Dashboard bundles
```

**API Optimization:**
- Response compression (gzip)
- Pagination (max 100 items)
- Field selection (sparse fieldsets)
- Async/await everywhere
- Background jobs for heavy operations

### 18.2 Frontend Optimization

**React Dashboard:**
- Code splitting by route
- Lazy loading components
- React.memo for expensive components
- Virtual scrolling for long lists
- Debounced search inputs
- Optimized re-renders

**Bundle Size:**
- Tree shaking
- Remove unused dependencies
- Dynamic imports
- Compress images (WebP)
- Minification and uglification

**Loading Strategy:**
- Skeleton screens
- Progressive loading
- Prefetch next page data
- Service worker for offline support

---

## 19. TESTING STRATEGY

### 19.1 Backend Testing

**Unit Tests:**
- Service layer business logic
- Validation logic
- Utility functions
- Target: 80% code coverage

**Integration Tests:**
- API endpoints
- Database operations
- External service integrations
- Authentication flows

**Load Tests:**
- Concurrent users: 100+
- Response time: <500ms (p95)
- API endpoints under stress

**Tools:**
- xUnit for .NET
- Moq for mocking
- FluentAssertions
- Testcontainers for DB tests
- JMeter for load testing

### 19.2 Frontend Testing

**Unit Tests:**
- Utility functions
- Custom hooks
- Form validation

**Component Tests:**
- React Testing Library
- User interactions
- State changes

**E2E Tests:**
- Critical user flows
- Playwright or Cypress
- Cross-browser testing

**Visual Testing:**
- Storybook for components
- Chromatic for visual regression

---

## 20. CUSTOMER ONBOARDING FLOW

### 20.1 Registration Flow

```
Step 1: Sign Up
- Business name
- Owner name
- Email
- Phone number
- Password
â†“
Step 2: Email Verification
- Send verification email
- Verify and activate account
â†“
Step 3: Shop Setup
- Shop type (Auto repair, Car wash, Both)
- Address (Province, Municipality, Barangay)
- Business hours
- TIN (optional for BIR)
â†“
Step 4: Service Configuration
- Select service categories
- Add common services with prices
- Setup service packages
â†“
Step 5: Product Setup (Optional)
- Import product catalog (CSV template)
- Add initial inventory
- Skip option
â†“
Step 6: Staff Invitation
- Invite staff members
- Assign roles
- Skip option
â†“
Step 7: Tutorial/Walkthrough
- Interactive product tour
- Sample data creation
- Video tutorials
â†“
Step 8: First Job Order
- Guide through creating first job order
- Celebrate completion ğŸ‰
```

### 20.2 Success Milestones

```
âœ“ Account created
âœ“ Shop configured
âœ“ First customer added
âœ“ First vehicle registered
âœ“ First job order created
âœ“ First invoice generated
âœ“ First payment recorded
âœ“ First appointment booked
```

**Rewards for milestones:**
- Unlock features
- Extend trial period
- Discount coupons

---

## 21. CUSTOMER SUPPORT STRATEGY

### 21.1 Support Channels

**Self-Service:**
- Knowledge base (help.talyerstudio.com)
- Video tutorials (YouTube channel)
- FAQ section
- In-app tooltips and guides

**Assisted Support:**
- Email: support@talyerstudio.com
- Live chat (Tawk.to) - Business hours
- Phone support (Enterprise only)
- Facebook Messenger

**Response Time SLAs:**
- Starter: 24-48 hours
- Professional: 12-24 hours
- Enterprise: 4-8 hours (priority)

### 21.2 Support Features

**In-App Support:**
- Help widget in dashboard
- Context-aware help articles
- Search functionality
- Ticket submission

**Community:**
- Facebook Group for shop owners
- User forum (future)
- Monthly webinars
- Feature request voting

---

## 22. ANALYTICS & INSIGHTS

### 22.1 Application Analytics

**Track User Behavior:**
- Page views and navigation
- Feature usage rates
- Drop-off points
- User session duration
- Error occurrences

**Business Intelligence:**
- Most used features
- Least used features (for deprecation)
- Feature adoption curves
- Tenant health scores

**Tools:**
- Google Analytics 4
- Mixpanel or Amplitude
- Custom event tracking

### 22.2 Shop Analytics (For Users)

**Dashboard for Shop Owners:**
- Revenue trends (daily, weekly, monthly)
- Top services by revenue
- Top customers by spend
- Service completion rates
- Average job value
- Busiest days/hours
- Mechanic productivity
- Inventory turnover
- Customer retention rate
- Appointment show-up rate

**Actionable Insights:**
- "Your revenue increased 15% this month"
- "Wednesday is your slowest day - run a promo"
- "5 customers haven't visited in 3 months"
- "Oil filter stock will run out in 5 days"

---

## 23. LOCALIZATION STRATEGY

### 23.1 Language Support

**Phase 1 (MVP):**
- English (primary)
- UI labels and messages

**Phase 2:**
- Tagalog translation
- Language switcher
- Date/number formatting (Philippine format)

**Phase 3:**
- Cebuano, Ilocano (major dialects)
- Regional customization

### 23.2 Philippine-Specific Features

**Address Format:**
```
Street/Subdivision
Barangay
Municipality/City
Province
Region
Zip Code
```

**Phone Format:**
- Support +63 prefix
- Format: +63 917 123 4567
- SMS validation

**Currency:**
- PHP (â‚±) as default
- Thousand separator: comma
- Decimal separator: period
- Format: â‚±1,234.56

**Date Format:**
- MM/DD/YYYY (common in PH)
- 12-hour time format with AM/PM

**Holidays:**
- Philippine holiday calendar
- Shop closure management

**Payment Methods:**
- Cash (primary)
- GCash (very popular)
- Maya (formerly PayMaya)
- Bank transfer
- Credit/Debit card

---

## 24. COMPETITIVE ANALYSIS

### 24.1 Key Competitors (International)

**Shopmonkey:**
- Pros: Comprehensive features, modern UI
- Cons: Expensive, US-focused, no PH payment integration

**Mitchell 1:**
- Pros: Established, repair data
- Cons: Legacy UI, complex, expensive

**AutoFluent:**
- Pros: Good for small shops
- Cons: Limited features, no mobile app

### 24.2 Competitive Advantages (TalyerStudio)

**Philippine-First:**
- âœ“ GCash/Maya integration
- âœ“ Philippine address format
- âœ“ Tagalog support
- âœ“ SMS via Semaphore (PH provider)
- âœ“ Affordable pricing (in PHP)
- âœ“ Local customer support

**Car Wash Integration:**
- âœ“ Built-in car wash services
- âœ“ Quick wash packages
- âœ“ Membership cards
- âœ“ Queue management

**White-Label Customer App:**
- âœ“ Shops can brand their own app
- âœ“ Customer engagement
- âœ“ Loyalty programs

**Modern Tech Stack:**
- âœ“ Fast and responsive
- âœ“ Mobile-first design
- âœ“ Real-time updates
- âœ“ Offline capable

**Pricing:**
- âœ“ 50-70% cheaper than international competitors
- âœ“ No setup fees
- âœ“ Flexible plans

---

## 25. SCALABILITY PLAN

### 25.1 Technical Scalability

**Year 1 (0-1000 shops):**
- Single region deployment
- Basic load balancing
- Standard PostgreSQL instance
- Redis caching

**Year 2 (1000-5000 shops):**
- Read replicas for database
- Multiple API instances
- CDN for global assets
- Horizontal scaling

**Year 3 (5000-20000 shops):**
- Database sharding by tenant
- Microservices architecture (if needed)
- Multi-region deployment
- Advanced caching strategies

### 25.2 Team Scalability

**Year 1:**
- 2-3 developers
- 1 designer
- 1 customer success

**Year 2:**
- 5-7 developers (specialized roles)
- 2 customer success
- 1 sales/marketing
- 1 devops

**Year 3:**
- 10-15 developers
- Product manager
- 3-5 customer success
- Sales team (3-5)
- Marketing team (2-3)

---

## 26. EXIT STRATEGY / ACQUISITION READINESS

### 26.1 Building for Acquisition

**Clean Code & Documentation:**
- Well-documented codebase
- API documentation (Swagger)
- Architecture diagrams
- Deployment runbooks

**Business Metrics:**
- Monthly recurring revenue (MRR)
- Customer acquisition cost (CAC)
- Lifetime value (LTV)
- Churn rate
- Net revenue retention

**Legal & Compliance:**
- Proper terms of service
- Privacy policy
- Data processing agreements
- Intellectual property ownership

**Financial Records:**
- Clean accounting
- Revenue recognition
- Cost structure
- P&L statements

### 26.2 Potential Acquirers

- Auto parts chains (expansion into services)
- International shop management software (geographic expansion)
- POS system companies (product expansion)
- Auto insurance companies (data acquisition)
- Private equity (SaaS rollup)

---

## 27. SUCCESS STORIES (Template for Marketing)

### Example Customer Journey

**"From Paper to Digital in 2 Weeks"**

**Shop:** JM Auto Repair, Quezon City
**Size:** 8 mechanics, 3 branches
**Challenge:** Manual booking, lost customer records, inventory chaos

**Results after 3 months:**
- 40% increase in repeat customers
- 25% reduction in inventory waste
- 3 hours saved per day on paperwork
- â‚±150,000 additional revenue from appointment reminders

**Quote:** "TalyerStudio helped us run our shop like a real business. Now we know exactly what's happening in all our branches."

---

## 28. FINAL CHECKLIST BEFORE LAUNCH

### 28.1 Pre-Launch (MVP)

**Technical:**
- [ ] All MVP features tested and working
- [ ] Security audit completed
- [ ] Performance testing passed
- [ ] SSL certificates installed
- [ ] Database backups configured
- [ ] Monitoring tools setup
- [ ] Error tracking configured
- [ ] API documentation complete

**Business:**
- [ ] Pricing finalized
- [ ] Terms of service ready
- [ ] Privacy policy ready
- [ ] Support channels setup
- [ ] Knowledge base articles written
- [ ] Onboarding flow tested
- [ ] Beta feedback incorporated
- [ ] Payment gateway integrated and tested

**Marketing:**
- [ ] Landing page live
- [ ] Social media accounts created
- [ ] Email templates ready
- [ ] Launch announcement prepared
- [ ] Press release (optional)
- [ ] Facebook ads campaign ready
- [ ] Demo videos recorded

**Legal:**
- [ ] Business registered
- [ ] BIR registration (if required)
- [ ] Data privacy compliance
- [ ] Terms properly reviewed
- [ ] Contracts for beta users

### 28.2 Launch Day

1. **Soft Launch (Internal + Beta Users)**
   - Send announcement to beta users
   - Monitor for critical issues
   - Quick fixes if needed

2. **Public Launch**
   - Press publish on landing page
   - Announce on social media
   - Enable signups
   - Run Facebook ads
   - Monitor signups and onboarding

3. **First Week Focus**
   - Daily monitoring
   - Quick response to support tickets
   - Collect feedback
   - Fix critical bugs
   - Celebrate first paying customer! ğŸ‰

---

## 29. ADDITIONAL FEATURE IDEAS (Future Backlog)

### 29.1 Advanced Features

**AI-Powered:**
- Service recommendation engine
- Price optimization suggestions
- Predictive maintenance alerts
- Chatbot for customer queries
- Invoice OCR (upload receipt, auto-extract items)

**Integration:**
- QuickBooks/Xero integration
- Auto parts supplier API integration
- Insurance company API
- Vehicle history (Carfax-like for PH)
- Google Maps integration (directions to shop)

**Customer Experience:**
- Live job tracking (like Uber for cars)
- Video updates from mechanic
- Estimated completion time with updates
- Customer satisfaction surveys
- Review/rating system

**Business Intelligence:**
- Benchmark against industry averages
- Profit margin analysis by service
- Customer segment analysis
- Seasonal trend predictions
- Automated business insights

**Operations:**
- Bay/Lift management
- Equipment maintenance tracking
- Supplier rating system
- Warranty tracking
- Franchise management module

### 29.2 Industry-Specific Modules

**For Dealerships:**
- New/used car inventory
- Trade-in management
- Finance/insurance products

**For Fleet Management:**
- Corporate account management
- Fleet tracking
- Maintenance contracts
- Driver management

**For Tire Shops:**
- Tire inventory by size
- Wheel alignment tracking
- Tire replacement schedules

---

## 30. TECHNICAL DEBT MANAGEMENT

### 30.1 Avoiding Technical Debt

**Best Practices:**
- Code reviews for all PRs
- Automated testing (minimum 70% coverage)
- Regular refactoring sprints
- Documentation as you go
- Performance monitoring
- Security scanning

**Technical Debt Register:**
- Track known issues
- Prioritize by impact
- Allocate 20% of sprint for debt reduction

### 30.2 Code Quality Standards

**C# (.NET):**
- Follow Microsoft C# coding conventions
- Use StyleCop/Roslyn analyzers
- SOLID principles
- Clean Architecture pattern

**React/TypeScript:**
- ESLint + Prettier
- Strict TypeScript mode
- Component composition patterns
- Custom hooks for reusability

**Database:**
- Naming conventions (snake_case)
- Migration versioning
- Rollback scripts for each migration

---

## 31. DISASTER RECOVERY PLAN

### 31.1 Backup Strategy

**Database Backups:**
- Automated daily backups (2 AM PHT)
- Retention: 30 days
- Weekly full backups (retained 6 months)
- Monthly archives (retained 2 years)
- Offsite backup storage (different region)
- Regular restore testing (monthly)

**Application Backups:**
- Code: Git repository (multiple remotes)
- Configuration: Encrypted backups
- Secrets: Vault/Key management service

**File Storage:**
- S3 with versioning enabled
- Cross-region replication
- Lifecycle policies

### 31.2 Incident Response

**Severity Levels:**
- P0: Complete outage (respond within 15 min)
- P1: Critical feature down (respond within 1 hour)
- P2: Major feature degraded (respond within 4 hours)
- P3: Minor issue (respond within 24 hours)

**Communication Plan:**
- Status page for system status
- Email notifications for outages
- SMS for P0 incidents
- Post-mortem reports

---

## 32. SUSTAINABILITY & GROWTH

### 32.1 Revenue Diversification

**Primary:** SaaS subscriptions (70%)
**Secondary:** 
- Setup/migration services (10%)
- Custom development (10%)
- Training & consulting (5%)
- Affiliate commissions (parts suppliers) (5%)

### 32.2 Expansion Opportunities

**Geographic:**
- Metro Manila â†’ Provincial cities
- Philippines â†’ Southeast Asia (Indonesia, Thailand, Vietnam)
- Similar markets (South America, Africa)

**Vertical:**
- Motorcycle shops (huge in PH)
- Bicycle shops
- Heavy equipment services
- Boat/marine services

**Horizontal:**
- Salon/spa management
- General service business platform
- Appointment booking as standalone product

---

## 33. MOTIVATION & VISION

### 33.1 Mission Statement

**"Empowering Filipino auto shop owners to run professional, profitable businesses through affordable, world-class technology."**

### 33.2 Core Values

- **Customer-First:** Build what shops actually need
- **Simplicity:** Make complex operations simple
- **Philippine Pride:** Built for Filipinos, by Filipinos
- **Reliability:** Be the backbone of their business
- **Accessibility:** Affordable for small shops

### 33.3 Long-Term Vision (5 Years)

**Where TalyerStudio will be:**
- 10,000+ shops across Southeast Asia
- â‚±50M+ ARR
- Team of 30-50 people
- Industry leader in PH market
- Acquired or independently successful
- Transformed how auto shops operate in the region

**Impact:**
- Helped 10,000+ shop owners grow their business
- Created jobs in tech sector
- Set standard for service business software in PH
- Contributed to digital transformation of traditional industries

---

## 34. CLOSING THOUGHTS

Building TalyerStudio is not just about creating softwareâ€”it's about solving real problems for hardworking Filipino shop owners. The Philippine market is underserved in this space, and there's a massive opportunity to create something truly valuable.

### Key Success Factors:

1. **Start Small, Think Big**
   - MVP in 3 months
   - Get real users early
   - Iterate based on feedback

2. **Philippine-First Always**
   - Local payment methods
   - Local support
   - Local pricing
   - Local features (car wash, etc.)

3. **Quality Over Speed**
   - Build it right the first time
   - Don't cut corners on security
   - Reliable system = happy customers

4. **Customer Success**
   - Their success is your success
   - Help them make more money
   - Be their technology partner

5. **Stay Lean**
   - Control costs
   - Bootstrap as long as possible
   - Grow sustainably

### The Path Forward:

**Months 1-3:** Build MVP, get first 10 paying shops
**Months 4-6:** Refine product, grow to 50 shops
**Months 7-12:** Scale to 200+ shops, add mobile apps
**Year 2:** Expand features, grow to 1000+ shops
**Year 3:** Regional expansion, 5000+ shops

---

## 35. RESOURCES & REFERENCES

### 35.1 Learning Resources

**Backend Development:**
- Microsoft Learn (.NET 8)
- Clean Architecture by Jason Taylor
- Domain-Driven Design Fundamentals

**Frontend Development:**
- React Documentation
- React Query Documentation
- TailwindCSS Documentation

**Database:**
- PostgreSQL Performance Optimization
- Database Design Best Practices

**Business:**
- The Mom Test (Customer Interviews)
- Lean Startup by Eric Ries
- SaaS Metrics for Beginners

### 35.2 Tools & Services

**Development:**
- GitHub (code hosting)
- Figma (design)
- Postman (API testing)
- TablePlus (database client)

**Deployment:**
- DigitalOcean / AWS / Azure
- CloudFlare (CDN, DNS)
- Vercel (frontend hosting option)

**Monitoring:**
- Sentry (error tracking)
- UptimeRobot (uptime monitoring)
- Google Analytics

**Communication:**
- Semaphore (SMS gateway PH)
- SendGrid (email)
- Tawk.to (live chat)

**Payment:**
- PayMongo (PH payment gateway)
- GCash Developer Portal
- Maya Business

### 35.3 Philippine Resources

**Business Registration:**
- DTI (Business Name Registration)
- SEC (Corporation)
- BIR (Tax Registration)
- Mayor's Permit (Local)

**Payment Gateways:**
- paymongo.com
- maya.ph
- gcash.com/business

**SMS Providers:**
- semaphore.co
- movider.co
- m360.com.ph

---

## 36. FINAL ACTION PLAN

### This Week:
1. Validate idea with 5 shop owners
2. Setup domains and hosting
3. Create detailed wireframes
4. Start database schema design

### This Month:
1. Complete MVP development plan
2. Build authentication system
3. Build customer module
4. Find 3 beta testers

### This Quarter:
1. Launch MVP to beta users
2. Iterate based on feedback
3. Prepare for public launch
4. Get first 10 paying customers

**Ready to build something amazing? Let's revolutionize the auto shop industry in the Philippines!** ğŸš€

---

*Document Version: 1.0*
*Last Updated: October 7, 2025*
*Created for: TalyerStudio Development*

---

## APPENDIX

### A. Glossary of Terms

- **Job Order:** Work order or service ticket
- **PMS:** Periodic Maintenance Service
- **Bay:** Service bay or parking spot for vehicle
- **SKU:** Stock Keeping Unit (product identifier)
- **OR:** Official Receipt
- **VAT:** Value Added Tax (12% in PH)
- **TIN:** Tax Identification Number
- **BIR:** Bureau of Internal Revenue (PH tax authority)

### B. Sample Data Structures

```typescript
// Customer Type
interface Customer {
  id: string;
  tenantId: string;
  firstName: string;
  lastName: string;
  email: string;
  phone: string;
  address: {
    street: string;
    barangay: string;
    municipality: string;
    province: string;
    zipCode: string;
  };
  birthday?: Date;
  loyaltyPoints: number;
  customerType: 'INDIVIDUAL' | 'CORPORATE';
  tags: string[];
  notes: string;
  createdAt: Date;
}

// Vehicle Type
interface Vehicle {
  id: string;
  customerId: string;
  make: string;
  model: string;
  year: number;
  plateNumber: string;
  engineNumber?: string;
  chassisNumber?: string;
  color: string;
  vehicleType: 'MOTORCYCLE' | 'CAR' | 'SUV' | 'TRUCK' | 'VAN';
  currentOdometer: number;
  images: string[];
  qrCode: string;
}

// Job Order Type
interface JobOrder {
  id: string;
  jobOrderNumber: string;
  tenantId: string;
  branchId: string;
  customerId: string;
  vehicleId: string;
  status: 'PENDING' | 'IN_PROGRESS' | 'COMPLETED' | 'INVOICED' | 'CANCELLED';
  priority: 'LOW' | 'NORMAL' | 'HIGH' | 'URGENT';
  services: JobOrderService[];
  parts: JobOrderPart[];
  assignedMechanics: string[];
  startTime?: Date;
  endTime?: Date;
  estimatedCompletionTime?: Date;
  odometerReading: number;
  customerComplaints: string;
  inspectionNotes: string;
  beforePhotos: string[];
  afterPhotos: string[];
  totalAmount: number;
  createdAt: Date;
  updatedAt: Date;
}

// Invoice Type
interface Invoice {
  id: string;
  invoiceNumber: string;
  tenantId: string;
  customerId: string;
  jobOrderId?: string;
  items: InvoiceItem[];
  subtotal: number;
  tax: number;
  discount: number;
  total: number;
  amountPaid: number;
  balance: number;
  status: 'DRAFT' | 'SENT' | 'PAID' | 'PARTIALLY_PAID' | 'OVERDUE' | 'CANCELLED';
  dueDate: Date;
  paidDate?: Date;
  notes: string;
  createdAt: Date;
}
```

### C. API Request/Response Examples

```typescript
// Create Job Order Request
POST /api/job-orders
{
  "customerId": "cust_123",
  "vehicleId": "veh_456",
  "priority": "NORMAL",
  "odometerReading": 45000,
  "customerComplaints": "Strange noise from engine",
  "services": [
    {
      "serviceId": "srv_oil_change",
      "quantity": 1,
      "price": 800
    },
    {
      "serviceId": "srv_inspection",
      "quantity": 1,
      "price": 300
    }
  ],
  "parts": [
    {
      "productId": "prod_filter_123",
      "quantity": 1,
      "price": 250
    }
  ]
}

// Response
{
  "success": true,
  "data": {
    "id": "jo_789",
    "jobOrderNumber": "JO-2025-001234",
    "status": "PENDING",
    "totalAmount": 1350,
    "createdAt": "2025-10-07T10:30:00Z"
  }
}
```

### D. Database Migration Example

```sql
-- Migration: 001_CreateCustomersTable
CREATE TABLE customers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID NOT NULL,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    email VARCHAR(255),
    phone_number VARCHAR(20) NOT NULL,
    street VARCHAR(255),
    barangay VARCHAR(100),
    municipality VARCHAR(100),
    province VARCHAR(100),
    zip_code VARCHAR(10),
    birthday DATE,
    loyalty_points INT DEFAULT 0,
    customer_type VARCHAR(20) DEFAULT 'INDIVIDUAL',
    tags TEXT[],
    notes TEXT,
    created_at TIMESTAMP NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP NOT NULL DEFAULT NOW(),
    deleted_at TIMESTAMP,
    CONSTRAINT fk_tenant FOREIGN KEY (tenant_id) REFERENCES tenants(id)
);

CREATE INDEX idx_customers_tenant_id ON customers(tenant_id);
CREATE INDEX idx_customers_phone ON customers(phone_number);
CREATE INDEX idx_customers_email ON customers(email);
```

### E. React Component Example

```typescript
// CustomerList.tsx
import { useQuery } from '@tanstack/react-query';
import { customerService } from '@/services/customerService';

export function CustomerList() {
  const { data, isLoading, error } = useQuery({
    queryKey: ['customers'],
    queryFn: () => customerService.getCustomers({ page: 1, pageSize: 20 })
  });

  if (isLoading) return <LoadingSkeleton />;
  if (error) return <ErrorMessage error={error} />;

  return (
    <div className="space-y-4">
      <div className="flex justify-between items-center">
        <h1 className="text-2xl font-bold">Customers</h1>
        <Button onClick={() => openModal('create-customer')}>
          Add Customer
        </Button>
      </div>

      <SearchInput 
        placeholder="Search customers..."
        onSearch={handleSearch}
      />

      <Table>
        <TableHeader>
          <TableRow>
            <TableHead>Name</TableHead>
            <TableHead>Phone</TableHead>
            <TableHead>Vehicles</TableHead>
            <TableHead>Last Visit</TableHead>
            <TableHead>Actions</TableHead>
          </TableRow>
        </TableHeader>
        <TableBody>
          {data.items.map(customer => (
            <TableRow key={customer.id}>
              <TableCell>
                {customer.firstName} {customer.lastName}
              </TableCell>
              <TableCell>{customer.phone}</TableCell>
              <TableCell>{customer.vehicleCount}</TableCell>
              <TableCell>{formatDate(customer.lastVisit)}</TableCell>
              <TableCell>
                <ActionMenu customer={customer} />
              </TableCell>
            </TableRow>
          ))}
        </TableBody>
      </Table>

      <Pagination 
        currentPage={data.pagination.page}
        totalPages={data.pagination.totalPages}
        onPageChange={handlePageChange}
      />
    </div>
  );
}
```

### F. .NET Service Example

```csharp
// CustomerService.cs
public class CustomerService : ICustomerService
{
    private readonly ApplicationDbContext _context;
    private readonly ITenantContext _tenantContext;
    private readonly IMapper _mapper;

    public CustomerService(
        ApplicationDbContext context,
        ITenantContext tenantContext,
        IMapper mapper)
    {
        _context = context;
        _tenantContext = tenantContext;
        _mapper = mapper;
    }

    public async Task<PagedResult<CustomerDto>> GetCustomersAsync(
        CustomerQueryParams queryParams)
    {
        var query = _context.Customers
            .Where(c => c.TenantId == _tenantContext.TenantId)
            .AsQueryable();

        // Search
        if (!string.IsNullOrEmpty(queryParams.Search))
        {
            query = query.Where(c => 
                c.FirstName.Contains(queryParams.Search) ||
                c.LastName.Contains(queryParams.Search) ||
                c.PhoneNumber.Contains(queryParams.Search));
        }

        // Filter by tags
        if (queryParams.Tags?.Any() == true)
        {
            query = query.Where(c => c.Tags.Any(t => queryParams.Tags.Contains(t)));
        }

        // Total count
        var totalItems = await query.CountAsync();

        // Pagination
        var items = await query
            .OrderByDescending(c => c.CreatedAt)
            .Skip((queryParams.Page - 1) * queryParams.PageSize)
            .Take(queryParams.PageSize)
            .ToListAsync();

        var customerDtos = _mapper.Map<List<CustomerDto>>(items);

        return new PagedResult<CustomerDto>
        {
            Items = customerDtos,
            TotalItems = totalItems,
            Page = queryParams.Page,
            PageSize = queryParams.PageSize
        };
    }

    public async Task<CustomerDto> CreateCustomerAsync(CreateCustomerDto dto)
    {
        var customer = _mapper.Map<Customer>(dto);
        customer.TenantId = _tenantContext.TenantId;
        customer.CreatedAt = DateTime.UtcNow;
        customer.UpdatedAt = DateTime.UtcNow;

        _context.Customers.Add(customer);
        await _context.SaveChangesAsync();

        return _mapper.Map<CustomerDto>(customer);
    }

    // ... other methods
}
```

### G. Testing Example

```csharp
// CustomerServiceTests.cs
public class CustomerServiceTests
{
    private readonly Mock<ApplicationDbContext> _mockContext;
    private readonly Mock<ITenantContext> _mockTenantContext;
    private readonly CustomerService _customerService;

    public CustomerServiceTests()
    {
        _mockContext = new Mock<ApplicationDbContext>();
        _mockTenantContext = new Mock<ITenantContext>();
        
        var mapper = new MapperConfiguration(cfg =>
        {
            cfg.AddProfile<CustomerMappingProfile>();
        }).CreateMapper();

        _customerService = new CustomerService(
            _mockContext.Object,
            _mockTenantContext.Object,
            mapper
        );
    }

    [Fact]
    public async Task CreateCustomer_WithValidData_ReturnsCustomerDto()
    {
        // Arrange
        var tenantId = Guid.NewGuid();
        _mockTenantContext.Setup(x => x.TenantId).Returns(tenantId);

        var createDto = new CreateCustomerDto
        {
            FirstName = "Juan",
            LastName = "Dela Cruz",
            PhoneNumber = "+639171234567",
            Email = "juan@example.com"
        };

        // Act
        var result = await _customerService.CreateCustomerAsync(createDto);

        // Assert
        Assert.NotNull(result);
        Assert.Equal("Juan", result.FirstName);
        Assert.Equal(tenantId, result.TenantId);
    }
}
```

### H. Environment Variables Template

```env
# .env.example

# Database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=talyerstudio
DATABASE_USER=postgres
DATABASE_PASSWORD=your_password

# JWT
JWT_SECRET=your-super-secret-jwt-key-min-32-chars
JWT_ISSUER=https://api.talyerstudio.com
JWT_AUDIENCE=https://talyerstudio.com
JWT_EXPIRY_MINUTES=60
REFRESH_TOKEN_EXPIRY_DAYS=7

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Email
SENDGRID_API_KEY=your_sendgrid_api_key
EMAIL_FROM=noreply@talyerstudio.com
EMAIL_FROM_NAME=TalyerStudio

# SMS
SEMAPHORE_API_KEY=your_semaphore_api_key
SEMAPHORE_SENDER_NAME=TalyerStudio

# Storage
AWS_ACCESS_KEY_ID=your_aws_key
AWS_SECRET_ACCESS_KEY=your_aws_secret
AWS_REGION=ap-southeast-1
AWS_S3_BUCKET=talyerstudio-files

# Payment
PAYMONGO_SECRET_KEY=sk_test_xxxxx
PAYMONGO_PUBLIC_KEY=pk_test_xxxxx

# Application
APP_ENV=development
APP_URL=http://localhost:3000
API_URL=http://localhost:5000
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# Monitoring
SENTRY_DSN=your_sentry_dsn
APPLICATION_INSIGHTS_KEY=your_app_insights_key
```

### I. Deployment Checklist

```bash
# Production Deployment Checklist

## Pre-Deployment
- [ ] All tests passing
- [ ] Code reviewed and approved
- [ ] Database migrations ready
- [ ] Environment variables configured
- [ ] SSL certificates valid
- [ ] Backup completed
- [ ] Rollback plan documented

## Deployment Steps
1. [ ] Put site in maintenance mode
2. [ ] Backup current database
3. [ ] Pull latest code
4. [ ] Run database migrations
5. [ ] Build and deploy API
6. [ ] Build and deploy dashboard
7. [ ] Clear cache (Redis)
8. [ ] Run smoke tests
9. [ ] Monitor error logs
10. [ ] Remove maintenance mode

## Post-Deployment
- [ ] Verify critical features working
- [ ] Check monitoring dashboards
- [ ] Notify team of successful deployment
- [ ] Monitor for 1 hour for issues
- [ ] Update changelog
```

### J. Performance Benchmarks

```
Target Performance Metrics:

API Response Times:
- GET requests: < 100ms (p95)
- POST requests: < 200ms (p95)
- Complex queries: < 500ms (p95)
- Report generation: < 3s

Dashboard:
- First Contentful Paint: < 1.5s
- Time to Interactive: < 3s
- Page navigation: < 500ms

Database:
- Query execution: < 50ms (simple)
- Query execution: < 200ms (complex)
- Connection pool: 10-50 connections

Uptime:
- Target: 99.9% (8.76 hours downtime/year)
- Acceptable: 99.5% (43.8 hours downtime/year)

Concurrent Users:
- Expected: 1000 concurrent users
- Peak capacity: 5000 concurrent users
```

### K. Security Audit Checklist

```
Security Audit Checklist:

Authentication & Authorization:
- [ ] Password hashing with bcrypt (cost 12+)
- [ ] JWT with proper expiry
- [ ] Refresh token rotation
- [ ] Role-based access control working
- [ ] Session management secure
- [ ] Account lockout after failed attempts

API Security:
- [ ] HTTPS only (no HTTP)
- [ ] CORS properly configured
- [ ] Rate limiting in place
- [ ] Input validation on all endpoints
- [ ] SQL injection prevention verified
- [ ] XSS protection enabled
- [ ] CSRF tokens for state changes

Data Security:
- [ ] Sensitive data encrypted at rest
- [ ] Sensitive data encrypted in transit
- [ ] No secrets in code
- [ ] Environment variables secured
- [ ] Database access restricted
- [ ] Regular backups working

Infrastructure:
- [ ] Firewall rules configured
- [ ] DDoS protection active
- [ ] WAF enabled
- [ ] Server hardening completed
- [ ] Security patches up to date
- [ ] Monitoring alerts working
```

### L. Customer Support Scripts

```
Common Support Scenarios:

1. Password Reset:
"Hi [Name]! I can help you reset your password. Please click on 
'Forgot Password' on the login page and enter your email. You'll 
receive a reset link within 5 minutes. If you don't see it, please 
check your spam folder."

2. Can't Find Customer Record:
"Let's find that customer together! Try searching by:
- Full name
- Phone number (without spaces or dashes)
- Plate number of their vehicle
Still can't find them? They might be registered at a different branch."

3. Invoice Not Printing:
"Let's troubleshoot the printing issue:
1. Check if your printer is connected and has paper
2. Try clicking 'Download PDF' instead, then print from PDF
3. Check your browser's pop-up blocker settings
4. Try a different browser (Chrome recommended)"

4. Low Stock Alert Not Working:
"To enable low stock alerts:
1. Go to Inventory â†’ Settings
2. Set your reorder point for each product
3. Enable notifications in your profile settings
You'll receive alerts when stock drops below the threshold."

5. Appointment Not Showing:
"Let me help you find that appointment:
1. Check if you're viewing the correct branch
2. Check the date range filter
3. Try the search function with customer name
If still not visible, it might have been accidentally deleted. 
We can restore it from backups if needed."
```

### M. Marketing Email Templates

```html
<!-- Welcome Email -->
Subject: Welcome to TalyerStudio! ğŸ‰

Hi [Shop Owner Name],

Welcome to TalyerStudio! We're excited to help you grow your auto shop 
business.

Your free 14-day trial is now active. Here's what you can do:

âœ… Add your first customer
âœ… Create your first job order
âœ… Generate your first invoice
âœ… Set up your services and pricing

Need help getting started?
- Watch our 5-minute setup video: [link]
- Book a free onboarding call: [link]
- Join our Facebook community: [link]

Happy to help anytime!

Best regards,
The TalyerStudio Team

P.S. Have questions? Just reply to this email!

---

<!-- Trial Ending Soon -->
Subject: Your trial ends in 3 days - Don't lose your data!

Hi [Name],

Your 14-day free trial of TalyerStudio ends in 3 days.

You've created:
- [X] customers
- [X] job orders
- â‚±[X] in invoices

Don't lose this data! Upgrade now to keep:
âœ“ All your customer records
âœ“ All your service history
âœ“ All your invoices and reports

[Upgrade Now Button]

Questions? We're here to help!
Reply to this email or call us at [phone]

---

<!-- Monthly Newsletter -->
Subject: New features + Tips to grow your shop ğŸš€

Hi [Name],

Here's what's new this month at TalyerStudio:

ğŸ†• New Features:
- WhatsApp notifications
- Advanced inventory reports
- Customer birthday reminders

ğŸ’¡ Tips from Top Shops:
1. Send appointment reminders 2 hours before
2. Follow up with customers 6 months after service
3. Offer package deals for repeat customers

ğŸ“Š Your Shop This Month:
- Revenue: â‚±[X] (+[%] vs last month)
- New customers: [X]
- Jobs completed: [X]

[View Full Dashboard]

Keep up the great work!
```

### N. Social Media Content Calendar

```
Week 1:
Mon: Feature highlight (Appointment scheduling)
Wed: Customer success story
Fri: Tip Tuesday (inventory management)

Week 2:
Mon: Behind the scenes (development)
Wed: FAQ answer (common question)
Fri: Weekend motivation quote

Week 3:
Mon: Product update announcement
Wed: Tutorial video (creating job orders)
Fri: User-generated content (customer post)

Week 4:
Mon: Industry news/trends
Wed: Promotional offer
Fri: Thank you to customers

Content Types:
- Screenshots/demos
- Video tutorials
- Customer testimonials
- Before/after comparisons
- Tips and tricks
- Industry insights
- Team spotlights
```

---

## CONCLUSION

This comprehensive architecture and roadmap provides everything you need to build TalyerStudio from concept to a successful SaaS business. The key is to:

1. **Start with the MVP** - Get something working in 3 months
2. **Listen to customers** - Build what they actually need
3. **Iterate quickly** - Ship features, gather feedback, improve
4. **Stay focused** - Don't try to do everything at once
5. **Build for scale** - But don't over-engineer early on

### Your Next Steps:

**This Week:**
- Validate the idea with 5 real shop owners
- Sketch out database schema
- Create wireframes for core screens

**This Month:**
- Setup development environment
- Start building authentication
- Build customer management module

**This Quarter:**
- Complete MVP
- Get 5-10 beta users
- Launch publicly